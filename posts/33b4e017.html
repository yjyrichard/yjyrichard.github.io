<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Nodejs | Yangjiayu</title><meta name="keywords" content="nodejs"><meta name="author" content="Yangjiayu"><meta name="copyright" content="Yangjiayu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="Nodejs">
<meta property="og:type" content="article">
<meta property="og:title" content="Nodejs">
<meta property="og:url" content="https://yjyrichard.github.io/posts/33b4e017.html">
<meta property="og:site_name" content="Yangjiayu">
<meta property="og:description" content="Nodejs">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://bilibili123.oss-cn-beijing.aliyuncs.com/websitepic/11.png">
<meta property="article:published_time" content="2025-07-31T12:05:25.346Z">
<meta property="article:modified_time" content="2025-08-01T02:51:31.848Z">
<meta property="article:author" content="Yangjiayu">
<meta property="article:tag" content="nodejs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://bilibili123.oss-cn-beijing.aliyuncs.com/websitepic/11.png"><link rel="shortcut icon" href="https://bilibili123.oss-cn-beijing.aliyuncs.com/about/your_image_path_here.jpg"><link rel="canonical" href="https://yjyrichard.github.io/posts/33b4e017"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"var(--theme-color)","bgDark":"#191919","position":"top-right"},
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Nodejs',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-08-01 10:51:31'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><span id="fps"></span><style id="defineBg"></style><style id="menu_shadow"></style><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Yangjiayu" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://bilibili123.oss-cn-beijing.aliyuncs.com/about/your_image_path_here.jpg" onerror="onerror=null;src='/assets/r1.jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">92</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> 首页</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> 八音盒</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> 影院</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> 健身</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/books/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> 书籍</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> 社交</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> 个人</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-qunliaotian">                   </use></svg><span class="menu_word" style="font-size:17px"> 时间管理</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-love-sign">                   </use></svg><span class="menu_word" style="font-size:17px"> 恋爱小屋</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-paperplane">                   </use></svg><span class="menu_word" style="font-size:17px"> 关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Yangjiayu</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> 首页</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> 归档</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> 八音盒</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> 影院</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> 健身</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/books/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> 书籍</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> 社交</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> 个人</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-qunliaotian">                   </use></svg><span class="menu_word" style="font-size:17px"> 时间管理</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-love-sign">                   </use></svg><span class="menu_word" style="font-size:17px"> 恋爱小屋</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-paperplane">                   </use></svg><span class="menu_word" style="font-size:17px"> 关于</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="检索站内任何你想要的信息"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg><span> 搜索</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="美化设置-自定义你的风格" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-tupian1"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="浅色和深色模式转换" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon">       </use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">Nodejs</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">发表于 </span><time class="post-meta-date-created" datetime="2025-07-31T12:05:25.346Z" title="发表于 2025-07-31 20:05:25">2025-07-31</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-08-01T02:51:31.848Z" title="更新于 2025-08-01 10:51:31">2025-08-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-biaoqian"></use></svg><a class="post-meta-categories" href="/categories/nodejs/">nodejs</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">字数总计:</span><span class="word-count">2.1w</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">阅读时长:</span><span>79分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Nodejs"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:5px"><use xlink:href="#icon-eye"></use></svg><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="为什么学习Node-js">为什么学习Node.js?</h2>
<p>加入你有一个网页，你有没有办法让别人都访问这个网页？</p>
<p>这个就是Node.js的作用了，至于它是如何让每一个人都访问到的，后面会详细展开</p>
<p>前端开发三大框架</p>
<p>Vue React Angular</p>
<p><img src="./nodejs(1).assets/image-20250609200213029.png" alt="image-20250609200213029"></p>
<p>这三个项目开发的时候都离不开Node.js,是一个必学项。</p>
<p>所以总结来说:</p>
<blockquote>
<p>1.可以让其他人访问我们编写的网页</p>
<p>2.为后续的框架学习打基础</p>
</blockquote>
<h2 id="Node-js是什么？">Node.js是什么？</h2>
<p>有人说：Node.js 是一门编程语言，也有人说Node.js是新版本的JavaScript? 那我们来看看官方是如何描述Node.js的：Node.js® 是一个免费、开源、跨平台的 JavaScript 运行时环境, 它让开发人员能够创建服务器 Web 应用、命令行工具和脚本。</p>
<p>通俗来讲：Node.js 就是<code>一款应用程序</code>，是<code>一款软件</code>，它可以运行JavaScript</p>
<h2 id="Node-js-的作用">Node.js 的作用</h2>
<p>1.开发服务器应用</p>
<p>2.开发工具类应用</p>
<p>3.开发桌面端应用</p>
<p>我们下面来展开说一下：</p>
<h3 id="1-开发服务器应用">1.开发服务器应用</h3>
<p><img src="./nodejs(1).assets/image-20250609200702080.png" alt="image-20250609200702080"></p>
<p>Node.js 就可以是在B站服务器里面的软件。<br>
我们前面说我们学习Node.js可以让别人访问到我们的网页，我们知道网页是由HTML,CSS,JavaScript 三件套组成的。那如果我们想让别人访问我们就必须使用服务器，但是服务器只有硬件，那么还得需要软件，Node.js就可以运行在服务器端，这样就可以让别人来访问我们的网站了。</p>
<h3 id="2-开发工具类应用">2.开发工具类应用</h3>
<p><img src="./nodejs(1).assets/image-20250609201015180.png" alt="image-20250609201015180"></p>
<h3 id="3-开发桌面端应用">3.开发桌面端应用</h3>
<p><img src="./nodejs(1).assets/image-20250609201050195.png" alt="image-20250609201050195"></p>
<p>这三个应用都是使用electron，而electron是基于node.js开发出来的。以后可以去学习electron就可以进行开发了</p>
<h2 id="Node-js-下载和安装">Node.js 下载和安装</h2>
<p>官网：<a target="_blank" rel="noopener" href="https://nodejs.org/zh-cn">Node.js — 在任何地方运行 JavaScript</a></p>
<p>怎么验证安装成功了吗？</p>
<p>使用cmd:然后输入node -v</p>
<p><strong>认识命令行工具</strong></p>
<p>你有没有办法不使用鼠标来打开QQ？</p>
<p>我们可以使用键盘上下左右，然后按回车</p>
<p>还没有办法呢？</p>
<p>我们可以使用一些快速启动工具，比如uTools</p>
<p>我们还可以使用cmd  (win+R)</p>
<p><strong>命令的结构</strong></p>
<p>思考题：</p>
<p>如何使用命令行工具打开谷歌浏览器并访问百度首页？</p>
<p>win+R 输入cmd，在控制台中输入chrome <a target="_blank" rel="noopener" href="http://www.baidu.com">http://www.baidu.com</a> 然后输入回车即可</p>
<p>chrome 是命令 ，网址后面是参数  如果后面再加http://bilibli.com 就会打开两个网页</p>
<p><strong>常用命令</strong></p>
<p>命令行如何查看【D：/Program Files 】里的内容？</p>
<p>我们可以cd（change directory） 到 cd /d D：/Program Files 然后输出dir</p>
<p>切换盘符直接 D： 即可</p>
<h2 id="Node-js-初体验">Node.js 初体验</h2>
<p>dir /s 是查看文件夹下所有的文件，ctrl+C可以停止</p>
<p>如果我们在hello.js中写下这样的代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello Node.js&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>我们在控制台中操作：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">D</span>:\<span class="title class_">Note</span>\code\nodejs&gt;node hello.<span class="property">js</span></span><br><span class="line">hello <span class="title class_">Node</span>.<span class="property">js</span></span><br></pre></td></tr></table></figure>
<h2 id="Node-js注意点">Node.js注意点</h2>
<p>Node.js中不能使用BOM和DOM的API</p>
<p><img src="./nodejs(1).assets/image-20250609202927856.png" alt="image-20250609202927856"></p>
<p><img src="./nodejs(1).assets/image-20250609202936856.png" alt="image-20250609202936856"></p>
<p>1.Node.js中不能使用BOM和DOM的API，可以使用console和定时器API</p>
<p>2.Node.js中的顶级对象为global,也可以使用globalThis 访问顶级对象</p>
<h2 id="Buffer">Buffer</h2>
<p>Buffer 中文译为【缓冲区】，是一个类似于Array的对象，用于表示固定长度的字节序列</p>
<p>换句话说，Buffer就是一段固定长度的内存空间，用于处理二进制数据</p>
<p><img src="./nodejs(1).assets/image-20250609203343347.png" alt="image-20250609203343347"></p>
<p><strong>特点</strong></p>
<p>1.Buffer 大小固定且无法调整</p>
<p>2.Buffer 性能较好，可以直接对计算机内存进行操作</p>
<p>3.每个元素的大小为 1 字节（byte）</p>
<p><img src="./nodejs(1).assets/image-20250609203455768.png" alt="image-20250609203455768"></p>
<p><strong>使用</strong></p>
<p>创建 Buffer Node.js 中创建 Buffer 的方式主要如下几种：</p>
<p>1.Buffer.alloc</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.alloc</span></span><br><span class="line"><span class="keyword">let</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">10</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf);</span><br></pre></td></tr></table></figure>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS D:\Note\code\nodejs&gt; node .\创建buffer.js</span><br><span class="line">&lt;Buffer 00 00 00 00 00 00 00 00 00 00&gt;</span><br></pre></td></tr></table></figure>
<p>2.Buffer.allocUnsafe</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2.allocUnsafe </span></span><br><span class="line"><span class="keyword">let</span> buf_2 = <span class="title class_">Buffer</span>.<span class="title function_">allocUnsafe</span>(<span class="number">10</span>); <span class="comment">//所创建的有可能会有旧数据 但是速度比alloc快</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf_2);</span><br></pre></td></tr></table></figure>
<p>3.Buffer.from</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//3.from 通过字符串创建buffer</span></span><br><span class="line"><span class="keyword">let</span> buf_3 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;hello world&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf_3);</span><br><span class="line"><span class="comment">//通过数组创建 Buffer</span></span><br><span class="line"><span class="keyword">let</span> buf_4 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>([<span class="number">105</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">118</span>, <span class="number">101</span>, <span class="number">121</span>, <span class="number">111</span>, <span class="number">117</span>]);</span><br></pre></td></tr></table></figure>
<p>**Buffer与字符串的转化 **</p>
<p>我们可以借助 toString 方法将 Buffer 转为字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> buf_4 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>([<span class="number">105</span>, <span class="number">108</span>, <span class="number">111</span>, <span class="number">118</span>, <span class="number">101</span>, <span class="number">121</span>, <span class="number">111</span>, <span class="number">117</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf_4.<span class="title function_">toString</span>())</span><br></pre></td></tr></table></figure>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PS D:\Note\code\nodejs&gt; node .\操作buffer.js</span><br><span class="line">iloveyou</span><br></pre></td></tr></table></figure>
<p>【这也可以是一种表白的方式】</p>
<blockquote>
<p>toString 默认是按照 utf-8 编码方式进行转换的。</p>
</blockquote>
<p>**Buffer 的读写 **</p>
<p>Buffer 可以直接通过 [] 的方式对数据进行处理。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//读取</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf_3[<span class="number">1</span>]);</span><br><span class="line"><span class="comment">//修改</span></span><br><span class="line">buf_3[<span class="number">1</span>] = <span class="number">97</span>;</span><br><span class="line"><span class="comment">//查看字符串结果</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf_3.<span class="title function_">toString</span>(<span class="number">2</span>));<span class="comment">//查看2进制</span></span><br><span class="line"><span class="comment">//溢出</span></span><br><span class="line"><span class="keyword">let</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">buf[<span class="number">0</span>] = <span class="number">361</span>;<span class="comment">//舍弃高位数字 因为最大只能255 0001 0110 1001 =&gt; 0110 1001</span></span><br><span class="line"><span class="comment">//中文</span></span><br><span class="line"><span class="keyword">let</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&quot;你好&quot;</span>) <span class="comment">//结果是6个字节而不是2个字节 </span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意:</p>
<ol>
<li>
<p>如果修改的数值超过 255 ，则超过 8 位数据会被舍弃</p>
</li>
<li>
<p>一个 utf-8 的字符 一般 占 3 个字节</p>
</li>
</ol>
</blockquote>
<h2 id="计算机基本组成">计算机基本组成</h2>
<p>CPU 内存 硬盘</p>
<p>内存：读写速度较快，断电丢失数据</p>
<p>硬盘：读写速度较慢，断电不丢失数据</p>
<p>主板：集成电路板</p>
<p>显卡：负责处理视频信号，当有信息需要呈现时，需要在屏幕中呈现就会将信息传递给显卡，显卡处理好后再传递给显示器。</p>
<p>机箱</p>
<p>外设</p>
<h2 id="程序运行的基本流程">程序运行的基本流程</h2>
<p>操作系统</p>
<p>windows, linux MacOS</p>
<p>操作系统也是一种应用程序，用来管理和调度硬件资源</p>
<p><img src="./nodejs(1).assets/image-20250609205140863.png" alt="image-20250609205140863"></p>
<p>英雄联盟是如何运行的？</p>
<p><img src="./nodejs(1).assets/image-20250609205248548.png" alt="image-20250609205248548"></p>
<p>小结：</p>
<p>程序一般保存再在硬盘中，软件安装的过程就是将程序写入硬盘的过程。</p>
<p>程序在运行时会加载进入内存，然后由CPU读取并执行程序</p>
<h2 id="进程和线程">进程和线程</h2>
<p><strong>进程</strong>：运行的程序</p>
<p>进程是程序的一次执行过程</p>
<p>可以通过任务管理器进行查看</p>
<p><strong>线程</strong>：</p>
<p>线程是一个进程中执行的一个执行流</p>
<p>一个线程是属于某个进程的</p>
<p>可以通过pslist -dmx [PID]</p>
<p><strong>线程和进程的关系</strong></p>
<p>比如说有一家蜜雪冰城的奶茶店</p>
<p>当开店的时候就好比是进程开始运行，有很多的员工，这里的员工就是线程</p>
<h2 id="fs模块">fs模块</h2>
<p>fs : file System</p>
<p>这个跟硬盘相关，fs模块可以实现与硬盘的交互。例如文件的创建，删除，重命名，移动，还有文件内容的写入，读取，以及文件夹的相关操作</p>
<p>fs 全称为 file system ，称之为 文件系统 ，是 Node.js 中的 内置模块 ，可以对计算机中的磁盘进行操 作。</p>
<p>本章节会介绍如下几个操作：</p>
<blockquote>
<p>文件写入</p>
<p>文件读取</p>
<p>文件移动与重命名</p>
<p>文件删除</p>
<p>文件夹操作</p>
<p>查看资源状态</p>
</blockquote>
<p>一、文件写入</p>
<p>文件写入就是将 数据 保存到 文件 中，我们可以使用如下几个方法来实现该效果</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>writeFile</td>
<td>异步写入</td>
</tr>
<tr>
<td>writeFileSync</td>
<td>同步写入</td>
</tr>
<tr>
<td>appendFile / appendFileSync</td>
<td>追加写入</td>
</tr>
<tr>
<td>createWriteStream</td>
<td>流式写入</td>
</tr>
</tbody>
</table>
<h3 id="1-1-writeFile异步写入">1 - 1. writeFile异步写入</h3>
<p><strong>语法</strong>: <code>fs.writeFile(file, data[, options], callback)</code></p>
<p><strong>参数说明</strong>:</p>
<ul>
<li><code>file</code>：文件名</li>
<li><code>data</code>：待写入的数据</li>
<li><code>options</code>（可选）：选项设置</li>
<li><code>callback</code>：写入回调</li>
</ul>
<p><strong>返回值</strong>: <code>undefined</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 需求：</span></span><br><span class="line"><span class="comment"> * 新建一个文件，座右铭.txt 写入内容，三人行，则必有我师焉</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//1.导入fs模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">// 2.调用方法</span></span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>, <span class="string">&#x27;三人行，则必有我师焉&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;写入失败&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;写入成功&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>明明右键就可以新建，为什么我们要用代码？</p>
<p>举个例子：</p>
<p>比如我们有一个网站，我们希望记录用户每次访问我们网站的时间，并且记录在一个文件中。难道安排一个人吗？</p>
<p>vscode 也是借助了fs这个模块</p>
<h2 id="fs异步与同步">fs异步与同步</h2>
<p>小明和小红去打篮球，小红突然说要去测试，那这个时候如果我等他一起去那就是同步，但是如果我先去它后来那就是异步。</p>
<h3 id="1-2-writeFileSync-同步写入">1 - 2. writeFileSync 同步写入</h3>
<p><strong>语法</strong>：<code>fs.writeFileSync(file, data[, options])</code></p>
<p><strong>参数说明</strong>：参数与 <code>fs.writeFile</code> 大体一致，只是没有 <code>callback</code> 参数。</p>
<p><strong>返回值</strong>：<code>undefined</code></p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="string">&#x27;三人行，必有我师焉。&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> filePath = <span class="string">&#x27;./座右铭.txt&#x27;</span>;</span><br><span class="line">    fs.<span class="title function_">writeFileSync</span>(filePath, data);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Node.js 磁盘操作模式说明</strong>：</p>
<p>Node.js 中的磁盘操作是由其他线程完成的，结果的处理有两种模式：</p>
<ul>
<li><strong>同步处理</strong>：JavaScript 主线程会等待其他线程的执行结果，然后再继续执行主线程的代码，效率较低。</li>
<li><strong>异步处理</strong>：JavaScript 主线程不会等待其他线程的执行结果，直接执行后续的主线程代码，效率较好。</li>
</ul>
<h3 id="1-3-appendFile-appendFileSync-追加写入">1 - 3. appendFile / appendFileSync 追加写入</h3>
<p><code>appendFile</code> 的作用是在文件尾部追加内容，它的语法和 <code>writeFile</code> 完全相同。</p>
<p><strong>语法</strong>：</p>
<ul>
<li><code>fs.appendFile(file, data[, options], callback)</code></li>
<li><code>fs.appendFileSync(file, data[, options])</code></li>
</ul>
<p><strong>返回值</strong>：二者都为 <code>undefined</code></p>
<p><strong>实例代码</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// appendFile 示例</span></span><br><span class="line"><span class="keyword">const</span> appendData = <span class="string">&#x27;追加的数据内容&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> appendFilePath = <span class="string">&#x27;existing_file.txt&#x27;</span>;</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">appendFile</span>(appendFilePath, appendData, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;追加文件错误:&#x27;</span>, err);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;文件追加成功!&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// appendFileSync 示例</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> appendFileSyncData = <span class="string">&#x27;这是用同步方式追加的数据&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> appendFileSyncPath = <span class="string">&#x27;another_existing_file.txt&#x27;</span>;</span><br><span class="line">    fs.<span class="title function_">appendFileSync</span>(appendFileSyncPath, appendFileSyncData);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;同步追加文件错误:&#x27;</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-4-createWriteStream-流式写入">1 - 4. createWriteStream 流式写入</h3>
<p><strong>语法</strong>：<code>fs.createWriteStream(path[, options])</code></p>
<p><strong>参数说明</strong>：</p>
<ul>
<li><code>path</code>：文件路径</li>
<li><code>options</code>（可选）：选项配置</li>
</ul>
<p><strong>返回值</strong>：<code>Object</code></p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ws = fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;./观书有感.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;半亩方塘一鉴开\r\n&#x27;</span>);</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;天光云影共徘徊\r\n&#x27;</span>);</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;问渠那得清如许\r\n&#x27;</span>);</span><br><span class="line">ws.<span class="title function_">write</span>(<span class="string">&#x27;为有源头活水来\r\n&#x27;</span>);</span><br><span class="line"></span><br><span class="line">ws.<span class="title function_">end</span>();</span><br></pre></td></tr></table></figure>
<p><strong>特点说明</strong>：</p>
<ul>
<li><strong>资源消耗</strong>：程序打开一个文件是需要消耗资源的，流式写入可以减少打开关闭文件的次数。</li>
<li><strong>适用场景</strong>：流式写入方式适用于大文件写入或者频繁写入的场景，<code>writeFile</code>适合于写入频率较低的场景。</li>
</ul>
<h3 id="1-5-写入文件的场景">1 - 5. 写入文件的场景</h3>
<p>文件写入在计算机中是一个非常常见的操作，下面的场景都用到了文件写入：</p>
<ul>
<li>下载文件</li>
<li>安装软件</li>
<li>保存程序日志，如 Git</li>
<li>编辑器保存文件</li>
<li>视频录制</li>
</ul>
<p>当需要<strong>持久化保存数据</strong>的时候，应该想到<strong>文件写入</strong> 。</p>
<h3 id="二、文件读取">二、文件读取</h3>
<p>文件读取顾名思义，就是通过程序从文件中取出其中的数据，我们可以使用如下几种方式：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>readFile</td>
<td>异步读</td>
</tr>
<tr>
<td>readFileSync</td>
<td>同步读</td>
</tr>
<tr>
<td>createReadStream</td>
<td>流式读</td>
</tr>
</tbody>
</table>
<h3 id="2-1-readFile-异步读取">2 - 1. <code>readFile</code> 异步读取</h3>
<p><strong>语法</strong>：<code>fs.readFile(path[, options], callback)</code></p>
<p><strong>参数说明</strong>：</p>
<ul>
<li><code>path</code>：文件路径</li>
<li><code>options</code>：选项配置（可选）</li>
<li><code>callback</code>：回调函数，第一个参数为错误对象 <code>err</code>（若读取无错误则为 <code>null</code>），第二个参数为读取到的数据 <code>data</code></li>
</ul>
<p><strong>返回值</strong>：<code>undefined</code></p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 fs 模块</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);  <span class="comment">// 若未指定 encoding（如未指定 &#x27;utf -8&#x27;），data 是 Buffer 类型</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);  <span class="comment">// 此时 data 是字符串类型</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong>：</p>
<ul>
<li>第一种 <code>readFile</code> 调用方式，如果不指定编码（<code>'utf -8'</code>），<code>data</code> 是 <code>Buffer</code>（缓冲区）类型，它是一个类似数组的对象，用于表示二进制数据。</li>
<li>第二种 <code>readFile</code> 调用方式，指定了编码 <code>'utf -8'</code>，<code>data</code> 会被自动转换为字符串类型，方便直接处理文本内容。</li>
</ul>
<h3 id="2-2-readFileSync-同步读取">2 - 2. <code>readFileSync</code> 同步读取</h3>
<p><strong>语法</strong>：<code>fs.readFileSync(path[, options])</code></p>
<p><strong>参数说明</strong>：</p>
<ul>
<li><code>path</code>：文件路径</li>
<li><code>options</code>：选项配置（可选）</li>
</ul>
<p><strong>返回值</strong>：读取到的数据（是 <code>Buffer</code> 类型或者根据指定编码转换后的字符串类型）</p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> data1 = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data1);  <span class="comment">// 未指定 encoding，是 Buffer 类型</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> data2 = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;./座右铭.txt&#x27;</span>, <span class="string">&#x27;utf -8&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data2);  <span class="comment">// 指定了 &#x27;utf -8&#x27;，是字符串类型</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong>：</p>
<ul>
<li><code>readFileSync</code> 是同步读取文件，即 JavaScript 主线程会等待文件读取完成后才继续执行后续代码。</li>
<li>它的返回值直接是读取到的数据，不像 <code>readFile</code> 通过回调函数获取数据。</li>
</ul>
<h3 id="2-3-createReadStream-流式读取">2 - 3. <code>createReadStream</code> 流式读取</h3>
<p><strong>语法</strong>：<code>fs.createReadStream(path[, options])</code></p>
<p><strong>参数说明</strong>：</p>
<ul>
<li><code>path</code>：文件路径</li>
<li><code>options</code>：选项配置（可选）</li>
</ul>
<p><strong>返回值</strong>：<code>ReadStream</code> 对象</p>
<p><strong>代码示例</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> readStream = fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;./较大的文本文件.txt&#x27;</span>, <span class="string">&#x27;utf -8&#x27;</span>);  <span class="comment">// 假设是一个较大的文本文件</span></span><br><span class="line"></span><br><span class="line">readStream.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">chunk</span>) =&gt;</span> &#123;  <span class="comment">// &#x27;data&#x27; 事件，当有数据可读时触发</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取到数据块：&#x27;</span>, chunk);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">readStream.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;  <span class="comment">// &#x27;end&#x27; 事件，当读取到文件末尾时触发</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;文件读取结束&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">readStream.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;  <span class="comment">// &#x27;error&#x27; 事件，当读取发生错误时触发</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;文件读取错误：&#x27;</span>, err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong>：</p>
<ul>
<li>流式读取适合读取大文件，它不会一次性将整个文件读入内存，而是分块读取（<code>chunk</code> 表示读取到的数据块）。</li>
<li>通过监听 <code>ReadStream</code> 对象的 <code>'data'</code>、<code>'end'</code>、<code>'error'</code> 等事件来处理读取过程中的不同情况。</li>
</ul>
<h3 id="2-4读取文件应用场景">2 - 4读取文件应用场景</h3>
<ul>
<li>电脑开机</li>
<li>程序运行</li>
<li>编辑器打开文件</li>
<li>查看图片</li>
<li>播放视频</li>
<li>播放音乐</li>
<li>Git查看日志</li>
<li>上传文件</li>
<li>查看聊天记录</li>
</ul>
<p>复制文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 需求：复制【座右铭.txt】</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> process = <span class="built_in">require</span>(<span class="string">&#x27;process&#x27;</span>)</span><br><span class="line"><span class="comment">//方式一readFile</span></span><br><span class="line"><span class="comment">//读取文件内容</span></span><br><span class="line"><span class="comment">// let data = fs.readFileSync(&#x27;座右铭.txt&#x27;);</span></span><br><span class="line"><span class="comment">// //写入文件</span></span><br><span class="line"><span class="comment">// fs.writeFileSync(&#x27;座右铭1.txt&#x27;, data);</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(process.<span class="title function_">memoryUsage</span>());<span class="comment">//rss</span></span><br><span class="line"><span class="comment">//方式二readStream</span></span><br><span class="line"><span class="keyword">let</span> rs = fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;座右铭.txt&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> ws = fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;座右铭2.txt&#x27;</span>);</span><br><span class="line">rs.<span class="title function_">pipe</span>(ws);<span class="comment">//这个pipe管道 这个用的不是特别多知道什么意思即可</span></span><br><span class="line">rs.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;复制完成&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(process.<span class="title function_">memoryUsage</span>());</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="三、文件移动与重命名">三、文件移动与重命名</h3>
<p>在 Node.js 中，我们可以使用 <code>rename</code> 或 <code>renameSync</code> 来移动或重命名 文件或文件夹。</p>
<p>语法：</p>
<ul>
<li><code>fs.rename(oldPath, newPath, callback)</code></li>
<li><code>fs.renameSync(oldPath, newPath)</code></li>
</ul>
<p>参数说明：</p>
<ul>
<li><code>oldPath</code>：文件当前的路径</li>
<li><code>newPath</code>：文件新的路径</li>
<li><code>callback</code>：操作后的回调</li>
</ul>
<h3 id="代码示例：">代码示例：</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="title function_">rename</span>(<span class="string">&#x27;../观书有感.txt&#x27;</span>, <span class="string">&#x27;../论语/观书有感.txt&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;移动完成&#x27;</span>)</span><br><span class="line">     &#125;);</span><br><span class="line"></span><br><span class="line">     fs.<span class="title function_">renameSync</span>(<span class="string">&#x27;../座右铭.txt&#x27;</span>, <span class="string">&#x27;../论语/我的座右铭.txt&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="四、文件删除">四、文件删除</h3>
<p>在 Node.js 中，我们可以使用 <code>unlink</code> 或 <code>unlinkSync</code> 来删除文件</p>
<p><strong>语法</strong>：</p>
<ul>
<li><code>fs.unlink(path, callback)</code></li>
<li><code>fs.unlinkSync(path)</code></li>
<li>也可以使用rm rmSync</li>
</ul>
<p><strong>参数说明</strong>：</p>
<ul>
<li><code>path</code>：文件路径</li>
<li><code>callback</code>：操作后的回调</li>
</ul>
<p><strong>代码示例</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步删除文件示例</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> filePath = <span class="string">&#x27;./要删除的文件.txt&#x27;</span>;</span><br><span class="line">fs.<span class="title function_">unlink</span>(filePath, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;文件删除错误:&#x27;</span>, err);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;文件删除成功!&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步删除文件示例</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> syncFilePath = <span class="string">&#x27;./另一个要删除的文件.txt&#x27;</span>;</span><br><span class="line">    fs.<span class="title function_">unlinkSync</span>(syncFilePath);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;同步删除文件错误:&#x27;</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="五、文件夹操作">五、文件夹操作</h3>
<p>借助 Node.js 的能力，我们可以对文件夹进行创建、读取、删除等操作</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>mkdir / mkdirSync</td>
<td>创建文件夹</td>
</tr>
<tr>
<td>readdir / readdirSync</td>
<td>读取文件夹</td>
</tr>
<tr>
<td>rmdir / rmdirSync</td>
<td>删除文件夹</td>
</tr>
</tbody>
</table>
<h3 id="5-1-mkdir-创建文件夹">5 - 1 mkdir 创建文件夹</h3>
<p>在 Node.js 中，我们可以使用 <code>mkdir</code> 或 <code>mkdirSync</code> 来创建文件夹</p>
<p><strong>语法</strong>：</p>
<ul>
<li><code>fs.mkdir(path[, options], callback)</code></li>
<li><code>fs.mkdirSync(path[, options])</code></li>
</ul>
<p><strong>参数说明</strong>：</p>
<ul>
<li><code>path</code>：文件夹路径</li>
<li><code>options</code>：选项配置（可选）</li>
<li><code>callback</code>：操作后的回调</li>
</ul>
<p><strong>示例代码</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步创建文件夹</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> folderPath = <span class="string">&#x27;./new_folder&#x27;</span>;</span><br><span class="line">fs.<span class="title function_">mkdir</span>(folderPath, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;创建文件夹错误:&#x27;</span>, err);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;文件夹创建成功!&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步创建文件夹</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> syncFolderPath = <span class="string">&#x27;./another_new_folder&#x27;</span>;</span><br><span class="line">    fs.<span class="title function_">mkdirSync</span>(syncFolderPath);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;同步创建文件夹错误:&#x27;</span>, e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//递归创建</span></span><br><span class="line"><span class="keyword">const</span> folderPath = <span class="string">&#x27;./a/b/c&#x27;</span>;</span><br><span class="line">fs.<span class="title function_">mkdir</span>(folderPath, &#123;<span class="attr">recursive</span>: <span class="literal">true</span>&#125;,<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;创建文件夹错误:&#x27;</span>, err);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;文件夹创建成功!&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.3读取文件夹 read dir</span></span><br><span class="line">fs.<span class="title function_">readdir</span>(<span class="string">&#x27;./资源&#x27;</span>,<span class="function">(<span class="params">err,data</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;读取失败&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//2-4删除文件夹</span></span><br><span class="line">fs.<span class="title function_">rmdir</span>(<span class="string">&#x27;./html&#x27;</span>,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除失败&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除成功&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="5-2-readdir-读取文件夹">5 - 2 <code>readdir</code> 读取文件夹</h3>
<p>在 Node.js 中，我们可以使用 <code>readdir</code> 或 <code>readdirSync</code> 来读取文件夹</p>
<h4 id="语法">语法:</h4>
<ul>
<li><code>fs.readdir(path[, options], callback)</code></li>
<li><code>fs.readdirSync(path[, options])</code></li>
</ul>
<h4 id="参数说明">参数说明:</h4>
<ul>
<li><code>path</code>：文件夹路径</li>
<li><code>options</code>：选项配置（可选）</li>
<li><code>callback</code>：操作后的回调</li>
</ul>
<h4 id="示例代码">示例代码:</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步读取</span></span><br><span class="line">fs.<span class="title function_">readdir</span>(<span class="string">&#x27;../论语/&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步读取</span></span><br><span class="line"><span class="keyword">let</span> data = fs.<span class="title function_">readdirSync</span>(<span class="string">&#x27;../论语/&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br></pre></td></tr></table></figure>
<h3 id="5-3-rndir-删除文件夹">5 - 3 rndir 删除文件夹</h3>
<p>在 Node.js 中，我们可以使用 <code>rndir</code> 或 <code>rndirSync</code> 来删除文件夹</p>
<h4 id="语法-2">语法:</h4>
<ul>
<li><code>fs.rmdir(path[, options], callback)</code></li>
<li><code>fs.rmdirSync(path[, options])</code></li>
</ul>
<h4 id="参数说明-2">参数说明:</h4>
<ul>
<li><code>path</code>：文件夹路径</li>
<li><code>options</code>：选项配置（可选）</li>
<li><code>callback</code>：操作后的回调</li>
</ul>
<h4 id="示例代码-2">示例代码:</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//异步删除文件夹</span></span><br><span class="line">fs.<span class="title function_">rmdir</span>(<span class="string">&#x27;./page&#x27;</span>, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;删除成功&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//异步递归删除文件夹</span></span><br><span class="line">fs.<span class="title function_">rmdir</span>(<span class="string">&#x27;./1&#x27;</span>, &#123;<span class="attr">recursive</span>: <span class="literal">true</span>&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(err) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;递归删除&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//同步递归删除文件夹</span></span><br><span class="line">fs.<span class="title function_">rmdirSync</span>(<span class="string">&#x27;./x&#x27;</span>, &#123;<span class="attr">recursive</span>: <span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="注意">注意:</h4>
<ul>
<li><code>rmdir</code> 和 <code>rmdirSync</code> 只能删除空文件夹，如果要删除非空文件夹，需要先删除文件夹内的所有文件和子文件夹。</li>
<li>在实际应用中，为了确保安全，建议在删除文件夹之前先确认其内容是否为预期，避免误删重要数据。</li>
</ul>
<h3 id="六、查看资源状态">六、查看资源状态</h3>
<p>在 Node.js 中，我们可以使用 <code>stat</code> 或 <code>statSync</code> 来查看资源的详细信息</p>
<h4 id="语法：">语法：</h4>
<ul>
<li><code>fs.stat(path[, options], callback)</code></li>
<li><code>fs.statSync(path[, options])</code></li>
</ul>
<h4 id="参数说明：">参数说明：</h4>
<ul>
<li><code>path</code>：文件夹路径</li>
<li><code>options</code>：选项配置（可选）</li>
<li><code>callback</code>：操作后的回调</li>
</ul>
<h4 id="示例代码：">示例代码：</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步获取状态</span></span><br><span class="line">fs.<span class="title function_">stat</span>(<span class="string">&#x27;./data.txt&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步获取状态</span></span><br><span class="line"><span class="keyword">let</span> data = fs.<span class="title function_">statSync</span>(<span class="string">&#x27;./data.txt&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h4 id="说明：">说明：</h4>
<p><code>stat</code> 方法返回的 <code>data</code> 对象包含了文件或文件夹的各种信息，例如：</p>
<ul>
<li><code>data.isFile()</code>：判断是否为文件</li>
<li><code>data.isDirectory()</code>：判断是否为目录（文件夹）</li>
<li><code>data.size</code>：文件大小（字节数）</li>
<li><code>data.birthtime</code>：创建时间</li>
<li><code>data.mtime</code>：最后修改时间等。</li>
</ul>
<p>通过这些信息可以更深入地了解文件或文件夹的属性和状态，以便进行相应的处理操作。</p>
<h4 id="结果值对象结构：">结果值对象结构：</h4>
<ul>
<li>size：文件体积</li>
<li>birthtime：创建时间</li>
<li>mtime：最后修改时间</li>
<li>isFile：检测是否为文件</li>
<li>isDirectory：检测是否为文件夹</li>
<li>…</li>
</ul>
<h3 id="七、相对路径问题">七、相对路径问题</h3>
<p><code>fs</code> 模块对资源进行操作时，路径的写法有两种：</p>
<ul>
<li>相对路径
<ul>
<li><code>./座右铭.txt</code> ：当前目录下的座右铭.txt</li>
<li><code>座右铭.txt</code> ：等同于上面的写法</li>
<li><code>../座右铭.txt</code> ：当前目录的上一级目录中的座右铭.txt</li>
</ul>
</li>
<li>绝对路径
<ul>
<li><code>D:/Program Files</code> ：windows 系统下的绝对路径</li>
<li><code>/usr/bin</code> ：Linux 系统下的绝对路径</li>
</ul>
</li>
</ul>
<p>相对路径中所谓的 <strong>当前目录</strong> ，指的是 <strong>命令行的工作目录</strong> ，而并非是文件的所在目录。所以当命令行的工作目录与文件所在目录不一致时，会出现一些 BUG。</p>
<h3 id="八、-dirname">八、__dirname</h3>
<ul>
<li><code>__dirname</code> 与 <code>require</code> 类似，都是 Node.js 环境中的“全局”变量。</li>
<li><code>__dirname</code> 保存着当前文件所在目录的绝对路径，可以使用 <code>__dirname</code> 与文件名拼接成绝对路径。</li>
</ul>
<h4 id="代码示例：-2">代码示例：</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = fs.<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/data.txt&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br></pre></td></tr></table></figure>
<ul>
<li>使用 <code>fs</code> 模块的时候，尽量使用 <code>__dirname</code> 将路径转化为绝对路径，这样可以避免相对路径产生的 Bug</li>
</ul>
<h3 id="练习：批量重命名">练习：批量重命名</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入fs</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//读取code文件夹</span></span><br><span class="line"><span class="keyword">const</span> files = fs.<span class="title function_">readdirSync</span>(<span class="string">&#x27;./code&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历数组</span></span><br><span class="line">files.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//拆分文件名</span></span><br><span class="line">  <span class="keyword">let</span> data = item.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>);</span><br><span class="line">  <span class="keyword">let</span> [num, name] = data;</span><br><span class="line">  <span class="comment">//判断</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Number</span>(num) &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    num = <span class="string">&#x27;0&#x27;</span> + num;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//创建新的文件名</span></span><br><span class="line">  <span class="keyword">let</span> newName = num + <span class="string">&#x27;-&#x27;</span> + name;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(newName);</span><br><span class="line">  <span class="comment">//重命名</span></span><br><span class="line">  fs.<span class="title function_">renameSync</span>(<span class="string">`./code/<span class="subst">$&#123;item&#125;</span>`</span>, <span class="string">`./code/<span class="subst">$&#123;newName&#125;</span>`</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>如果把02删除了 能不能把03变02，04变03？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取 code 文件夹</span></span><br><span class="line"><span class="keyword">const</span> files = fs.<span class="title function_">readdirSync</span>(<span class="string">&#x27;./code&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按照文件名中的序号进行排序（假设文件名格式类似 &quot;01 - something&quot;）</span></span><br><span class="line">files.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> numA = <span class="built_in">parseInt</span>(a.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">0</span>]);</span><br><span class="line">  <span class="keyword">const</span> numB = <span class="built_in">parseInt</span>(b.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)[<span class="number">0</span>]);</span><br><span class="line">  <span class="keyword">return</span> numA - numB;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新命名文件</span></span><br><span class="line">files.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> newNum = index + <span class="number">1</span>; <span class="comment">// 新的序号从 1 开始</span></span><br><span class="line">  <span class="comment">// 补零处理</span></span><br><span class="line">  <span class="keyword">if</span> (newNum &lt; <span class="number">10</span>) &#123;</span><br><span class="line">    newNum = <span class="string">&#x27;0&#x27;</span> + newNum;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> data = item.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>);</span><br><span class="line">  <span class="keyword">let</span> [oldNum, name] = data;</span><br><span class="line">  <span class="keyword">let</span> newName = newNum + <span class="string">&#x27;-&#x27;</span> + name;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`重命名：<span class="subst">$&#123;item&#125;</span> -&gt; <span class="subst">$&#123;newName&#125;</span>`</span>);</span><br><span class="line">  fs.<span class="title function_">renameSync</span>(<span class="string">`./code/<span class="subst">$&#123;item&#125;</span>`</span>, <span class="string">`./code/<span class="subst">$&#123;newName&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="path-模块">path 模块</h2>
<p>path 模块提供了 <strong>操作路径</strong> 的功能，我们将介绍如下几个较为常用的几个 API：</p>
<table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>path.resolve</td>
<td>拼接规范的绝对路径 <strong>常用</strong></td>
</tr>
<tr>
<td>path.sep</td>
<td>获取操作系统的路径分隔符</td>
</tr>
<tr>
<td>path.parse</td>
<td>解析路径并返回对象</td>
</tr>
<tr>
<td>path.basename</td>
<td>获取路径的基础名称</td>
</tr>
<tr>
<td>path.dirname</td>
<td>获取路径的目录名</td>
</tr>
<tr>
<td>path.extname</td>
<td>获得路径的扩展名</td>
</tr>
</tbody>
</table>
<h4 id="代码示例：-3">代码示例：</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//resolve</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">resolve</span>(__dirname,<span class="string">&#x27;index.html&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取路径分隔符</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="property">sep</span>);<span class="comment">//window \ linux /</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 拼接绝对路径</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;test&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解析路径</span></span><br><span class="line"><span class="keyword">let</span> pathname = <span class="string">&#x27;D:/program file/nodejs/node.exe&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">parse</span>(pathname));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取路径基础名称</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">basename</span>(pathname))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取路径的目录名</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">dirname</span>(pathname));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取路径的扩展名</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(path.<span class="title function_">extname</span>(pathname));</span><br></pre></td></tr></table></figure>
<h2 id="HTTPS协议">HTTPS协议</h2>
<h3 id="一、概念">一、概念</h3>
<p>HTTP（hypertext transport protocoI）协议；中文叫超文本传输协议。 是一种基于 TCP/IP 的应用层通信协议。 这个协议详细规定了浏览器和万维网服务器之间互相通信的规则。 协议中主要规定了两个方面的内容：</p>
<ul>
<li>客户端：用来向服务器发送数据，可以被称之为请求报文。</li>
<li>服务端：向客户端返回数据，可以被称之为响应报文。</li>
</ul>
<p><strong>报文</strong>：可以简单理解为就是一堆字符串。</p>
<p>【离婚协议，保密协议 https协议就是浏览器和服务器之间的协议】</p>
<p>如果我们想看到请求和响应的报文我们要下载一个软件叫fiddler</p>
<p><img src="./nodejs(1).assets/image-20250609221641878.png" alt="image-20250609221641878"></p>
<h3 id="二、请求报文的组成">二、请求报文的组成</h3>
<ul>
<li>请求行</li>
<li>请求头</li>
<li>空行</li>
<li>请求体</li>
</ul>
<h3 id="三、HTTP-的请求行">三、HTTP 的请求行</h3>
<ul>
<li>
<p>请求方法（get、post、put、delete等）</p>
</li>
<li>
<p>请求 URL（统一资源定位器）</p>
<ul>
<li>
<p>例如：</p>
<p><a target="_blank" rel="noopener" href="http://www.baidu.com:80/index.html?a=100&amp;b=200#logo">http://www.baidu.com:80/index.html?a=100&amp;b=200#logo</a></p>
<ul>
<li>http: 协议（https、ftp、ssh等）</li>
<li><a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> 域名</li>
<li>80 端口号</li>
<li>/index.html 路径</li>
<li>a=100&amp;b=200 查询字符串</li>
<li>#logo 哈希（锚点链接）</li>
</ul>
</li>
</ul>
</li>
<li>
<p>HTTP 协议版本号</p>
</li>
</ul>
<p>查询字符串和路径有什么区别？比如我要去买煎饼果子，这个就是路径，我说我煎饼果子要加辣椒要加根肠那就查询字符串</p>
<p><img src="./nodejs(1).assets/image-20250609222915592.png" alt="image-20250609222915592"></p>
<h3 id="四、HTTP-请求头">四、HTTP 请求头</h3>
<p>格式：『头名：头值』 常见的请求头有：</p>
<table>
<thead>
<tr>
<th>请求头</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>Host</td>
<td>主机名</td>
</tr>
<tr>
<td>Connection</td>
<td>连接的设置 keep - alive（保持连接）；close（关闭连接）</td>
</tr>
<tr>
<td>Cache - Control</td>
<td>缓存控制 max - age = 0（没有缓存）</td>
</tr>
<tr>
<td>Upgrade - Insecure - Requests</td>
<td>将网页中的 http 请求转化为 https 请求（很少用）老网站升级</td>
</tr>
<tr>
<td>User - Agent</td>
<td>用户代理，客户端字符串标识，服务器可以通过这个标识来识别这个请求来自哪个客户端，一般在 PC 端和手机端的区分</td>
</tr>
<tr>
<td>Accept</td>
<td>设置浏览器接收的数据类型</td>
</tr>
<tr>
<td>Accept - Encoding</td>
<td>设置接收的压缩方式</td>
</tr>
<tr>
<td>Accept - Language</td>
<td>设置接收的语言 q = 0.7 为喜好系数，满分为 1</td>
</tr>
<tr>
<td>Cookie</td>
<td>后面单独讲</td>
</tr>
</tbody>
</table>
<h3 id="五、HTTP-的请求体">五、HTTP 的请求体</h3>
<p>请求体内容的格式是非常灵活的， （可以是空）==&gt; GET 请求， （也可以是字符串，还可以是 JSON）===&gt; POST 请求 例如：</p>
<ul>
<li>字符串：<code>keywords=手机&amp;price=2000</code></li>
<li>JSON：<code>&#123;&quot;keywords&quot;:&quot;手机&quot;,&quot;price&quot;:2000&#125;</code></li>
</ul>
<h3 id="六、响应报文的组成">六、响应报文的组成</h3>
<ul>
<li>响应行</li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">HTTP</span>/<span class="number">1</span>.<span class="number">1</span> <span class="number">200</span> OK</span><br></pre></td></tr></table></figure>
<ul>
<li>HTTP/1.1：HTTP 协议版本号</li>
<li>200：响应状态码 404 Not Found 500 Internal Server Error 还有一些状态码，参考：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status</a></li>
<li>OK：响应状态描述</li>
</ul>
<blockquote>
<p>响应状态码和响应字符串关系是一一对应的。</p>
</blockquote>
<ul>
<li>响应头</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">响应头</th>
<th style="text-align:center">解释</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Cache - Control</td>
<td style="text-align:center">缓存控制 （private 私有，只允许客户端缓存数据）</td>
</tr>
<tr>
<td style="text-align:center">Connection</td>
<td style="text-align:center">链接设置</td>
</tr>
<tr>
<td style="text-align:center">Content - Type</td>
<td style="text-align:center">设置响应体的数据类型以及字符集（如：text/html;charset=utf - 8 ，表示响应体为 html，字符集 utf - 8）</td>
</tr>
<tr>
<td style="text-align:center">Content - Length</td>
<td style="text-align:center">响应体的长度，单位为字节</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>空行</strong></li>
<li><strong>响应体</strong> 响应体内容的类型是非常灵活的，常见的类型有 HTML、CSS、JS、图片、JSON</li>
</ul>
<h3 id="七、创建-HTTP-服务">七、创建 HTTP 服务</h3>
<p>地址 ==》 寻找收件人</p>
<p><strong>IP</strong> ==》 寻找网络设备</p>
<p>IP也称为【IP地址】，本身是一个数字标识 例如 192.168.1.3</p>
<p>IP 用来标识网络中的设备，实现设备间通信</p>
<p><img src="./nodejs(1).assets/image-20250610001641463.png" alt="image-20250610001641463"></p>
<p><strong>IP的分类</strong></p>
<p>32Bit IPV4  已经不够</p>
<p>如何解决？</p>
<p>共享IP</p>
<p>区域共享  家庭共享</p>
<p>局域网IP（又称之为私网IP）在这个网络里面我们的设备是可以相互通信的，比如手机可以给电脑发一个文件，电脑可以发一个视频给手机，这些都是可以的。但是如果你想跟小伙伴开黑，打视频那这个是做不到的。必须连接互联网，去通信公司办理业务，国内主要有三家电信，联通，移动。师傅会上门帮你的路由器接一根线，然后你的路由器就会得到广域网IP或公网IP，我们说所的共享IP其实是公网IP</p>
<p><strong>本地回环IP地址</strong></p>
<p>127.0.0.1 其实就是本机</p>
<p>127.0.0.1~127.255.255.254</p>
<p><img src="./nodejs(1).assets/image-20250610083606917.png" alt="image-20250610083606917"></p>
<p>IP标准分类 ： <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/193729352">https://zhuanlan.zhihu.com/p/193729352</a></p>
<p><strong>端口</strong></p>
<p>端口举例</p>
<p><img src="./nodejs(1).assets/image-20250610083823911.png" alt="image-20250610083823911"></p>
<p>应用程序的数字标识</p>
<p>一台现代计算机有65536 个端口（0~65535）</p>
<p>一个应用程序可以使用一个或多个端口</p>
<p>端口的主要作用：实现不同主机应用程序之间的通信</p>
<p>身份转换~ 到后端啦</p>
<p>使用 nodejs 创建 HTTP 服务</p>
<h4 id="7-1-操作步骤">7.1 操作步骤</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 创建服务对象 create 创建 server 服务</span></span><br><span class="line"><span class="comment">// request 意为请求，是对请求报文的封装对象，通过 request 对象可以获得请求报文的数据</span></span><br><span class="line"><span class="comment">// response 意为响应，是对响应报文的封装对象，通过 response 对象可以设置响应报文</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    response.<span class="title function_">end</span>(<span class="string">&#x27;Hello HTTP server&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 监听端口，启动服务</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动，端口 9000 监听中...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="7-2测试">7.2测试</h4>
<p>浏览器请求对应端口<br>
<a target="_blank" rel="noopener" href="http://127.0.0.1:9000">http://127.0.0.1:9000</a></p>
<h4 id="7-3注意事项">7.3注意事项</h4>
<p>1.命令行ctr1+c停止服务<br>
2.当服务启动后，更新代码必须重启服务才能生效<br>
3.响应内容中文乱码的解决办法</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setHeader(<span class="symbol">&#x27;content</span>-<span class="keyword">type</span><span class="string">&#x27;,&#x27;</span>text/html;charset=utf-<span class="number">8</span>&#x27;);</span><br></pre></td></tr></table></figure>
<p>4.端口号被占用</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Error</span><span class="symbol">:listen</span> <span class="variable constant_">EADDRINUSE</span><span class="symbol">:address</span> already <span class="keyword">in</span> use <span class="number">9000</span></span><br></pre></td></tr></table></figure>
<p>1)关闭当前正在运行监听端口的服务（使用较多）<br>
2)修改其他端口号</p>
<h4 id="HTTP协议默认端口">HTTP协议默认端口</h4>
<ul>
<li>HTTP协议默认端口是80。</li>
<li>HTTPS协议的默认端口是443。</li>
<li>HTTP服务开发常用端口有3000、8080、8090、9000等。</li>
</ul>
<h4 id="端口被占用处理">端口被占用处理</h4>
<p>如果端口被其他程序占用，可以使用<strong>资源监视器</strong>找到占用端口的程序，然后使用<strong>任务管理器</strong>关闭对应的程序。</p>
<h3 id="八、浏览器查看HTTP报文">八、浏览器查看HTTP报文</h3>
<p>f12</p>
<h3 id="九、获取HTTP请求报文">九、获取HTTP请求报文</h3>
<p>想要获取请求的数据，需要通过request对象</p>
<table>
<thead>
<tr>
<th>含义</th>
<th>语法</th>
<th>重点掌握</th>
</tr>
</thead>
<tbody>
<tr>
<td>请求方法</td>
<td>request.method</td>
<td>*</td>
</tr>
<tr>
<td>请求版本</td>
<td>request.httpVersion</td>
<td></td>
</tr>
<tr>
<td>请求路径</td>
<td>request.url</td>
<td>*</td>
</tr>
<tr>
<td>URL 路径</td>
<td>require(‘url’).parse(request.url).pathname</td>
<td>*</td>
</tr>
<tr>
<td>URL 查询字符串</td>
<td>require(‘url’).parse(request.url, true).query</td>
<td>*</td>
</tr>
<tr>
<td>请求头</td>
<td>request.headers</td>
<td>*</td>
</tr>
<tr>
<td>请求体</td>
<td>request.on(‘data’, function(chunk){})request.on(‘end’, function(){});</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="注意事项：">注意事项：</h3>
<ol>
<li>request.url 只能获取路径以及查询字符串，无法获取 URL 中的域名以及协议的内容</li>
<li>request.headers 将请求信息转化成一个对象，并将属性名都转化成了『小写』</li>
<li>关于路径：如果访问网站的时候，只填写了 IP 地址或者是域名信息，此时请求的路径为『 / 』</li>
<li>关于 favicon.ico：这个请求是属于浏览器自动发送的请求</li>
</ol>
<p><strong>9.1 练习</strong></p>
<p>按照以下要求搭建 HTTP 服务</p>
<table>
<thead>
<tr>
<th>请求类型(方法)</th>
<th>请求地址</th>
<th>响应体结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>get</td>
<td>/login</td>
<td>登录页面</td>
</tr>
<tr>
<td>get</td>
<td>/reg</td>
<td>注册页面</td>
</tr>
</tbody>
</table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、引入http模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"><span class="comment">//2、建立服务</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;url,method&#125; = request; <span class="comment">//对象的解构赋值</span></span><br><span class="line">    <span class="comment">//设置响应头信息</span></span><br><span class="line">    <span class="comment">//解决中文乱码</span></span><br><span class="line">    response.<span class="title function_">setHeader</span>(<span class="string">&quot;Content-Type&quot;</span>,<span class="string">&quot;text/html;charset=utf-8&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(url == <span class="string">&quot;/register&quot;</span> &amp;&amp; method == <span class="string">&quot;GET&quot;</span>)&#123;</span><br><span class="line">        response.<span class="title function_">end</span>(<span class="string">&quot;注册页面&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(url==<span class="string">&quot;/login&quot;</span> &amp;&amp; method == <span class="string">&quot;GET&quot;</span>)&#123;</span><br><span class="line">        response.<span class="title function_">end</span>(<span class="string">&quot;登录页面&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        response.<span class="title function_">end</span>(<span class="string">&quot;&lt;h1&gt;404 Not Found&lt;/h1&gt;&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//3、监听端口</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">8000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务启动中....&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="十、设置-HTTP-响应报文">十、设置 HTTP 响应报文</h3>
<table>
<thead>
<tr>
<th>作用</th>
<th>语法</th>
</tr>
</thead>
<tbody>
<tr>
<td>设置响应状态码</td>
<td><code>response.statusCode</code></td>
</tr>
<tr>
<td>设置响应状态描述</td>
<td><code>response.statusMessage</code>（用的非常少）</td>
</tr>
<tr>
<td>设置响应头信息</td>
<td><code>response.setHeader('头名', '头值')</code></td>
</tr>
<tr>
<td>设置响应体</td>
<td><code>response.write('xx')``response.end('xxx')</code></td>
</tr>
</tbody>
</table>
<h3 id="write-和-end-的两种使用情况："><code>write</code> 和 <code>end</code> 的两种使用情况：</h3>
<h4 id="1-write-和-end-的结合使用（响应体相对分散）">1. <code>write</code> 和 <code>end</code> 的结合使用（响应体相对分散）</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">response.<span class="title function_">write</span>(<span class="string">&#x27;xx&#x27;</span>);</span><br><span class="line">response.<span class="title function_">write</span>(<span class="string">&#x27;xx&#x27;</span>);</span><br><span class="line">response.<span class="title function_">write</span>(<span class="string">&#x27;xx&#x27;</span>);</span><br><span class="line">response.<span class="title function_">end</span>(); <span class="comment">// 每一个请求，在处理的时候必须要执行 end 方法的</span></span><br></pre></td></tr></table></figure>
<h4 id="2-单独使用-end-方法（响应体相对集中）">2. 单独使用 <code>end</code> 方法（响应体相对集中）</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.<span class="title function_">end</span>(<span class="string">&#x27;xxx&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="10-1-练习">10.1 练习</h3>
<p>搭建 HTTP 服务，响应一个 4 行 3 列的表格，并且要求表格有隔行换色效果，且点击单元格能高亮显示</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建服务对象</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  response.<span class="title function_">end</span>(<span class="string">`</span></span><br><span class="line"><span class="string">    &lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">    &lt;html lang=&quot;en&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;head&gt;</span></span><br><span class="line"><span class="string">      &lt;meta charset=&quot;UTF - 8&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;meta http - equiv=&quot;X - UA - Compatible&quot; content=&quot;IE = edge&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;meta name=&quot;viewport&quot; content=&quot;width = device - width, initial - scale = 1.0&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;title&gt;Document&lt;/title&gt;</span></span><br><span class="line"><span class="string">      &lt;style&gt;</span></span><br><span class="line"><span class="string">        td&#123;</span></span><br><span class="line"><span class="string">          padding: 20px 40px;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        table tr:nth-child(odd)&#123;</span></span><br><span class="line"><span class="string">          background: #819dc0;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        table tr:nth-child(even)&#123;</span></span><br><span class="line"><span class="string">          background: #f5de19;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        table, td&#123;</span></span><br><span class="line"><span class="string">          border: 1px solid #000;</span></span><br><span class="line"><span class="string">          border-collapse: collapse;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &lt;/style&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;</span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">      &lt;table border=&quot;1&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;tr&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">        &lt;/tr&gt;</span></span><br><span class="line"><span class="string">        &lt;tr&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">        &lt;/tr&gt;</span></span><br><span class="line"><span class="string">        &lt;tr&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">        &lt;/tr&gt;</span></span><br><span class="line"><span class="string">        &lt;tr&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;</span></span><br><span class="line"><span class="string">        &lt;/tr&gt;</span></span><br><span class="line"><span class="string">      &lt;/table&gt;</span></span><br><span class="line"><span class="string">      &lt;script&gt;</span></span><br><span class="line"><span class="string">        //获取所有的 td</span></span><br><span class="line"><span class="string">        let tds = document.querySelectorAll(&#x27;td&#x27;);</span></span><br><span class="line"><span class="string">        //遍历</span></span><br><span class="line"><span class="string">        tds.forEach(item =&gt; &#123;</span></span><br><span class="line"><span class="string">          item.onclick = function () &#123;</span></span><br><span class="line"><span class="string">            this.style.background = &#x27;#222&#x27;;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;)</span></span><br><span class="line"><span class="string">      &lt;/script&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">  `</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动....&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="核心代码解释：">核心代码解释：</h3>
<ul>
<li>在 HTML 表格标签<code>&lt;table&gt;</code>中，通过<code>nth - child(odd)</code>和<code>nth - child(even)</code>实现了表格的隔行换色效果。</li>
<li>在<code>&lt;script&gt;</code>标签中，通过<code>document.querySelectorAll('td')</code>获取到了所有的<code>&lt;td&gt;</code>标签元素，并通过遍历遍历为每个<code>td</code>元素添加了<code>onclick</code>事件。</li>
<li>在<code>onclick</code>事件中，通过<code>this.style.background = '#222'</code>实现了点击单元格时的高亮显示效果。</li>
</ul>
<h3 id="HTTP-服务搭建核心逻辑：">HTTP 服务搭建核心逻辑：</h3>
<ul>
<li>首先导入<code>http</code>模块。</li>
<li>然后通过<code>http.createServer</code>创建了一个 HTTP 服务，在这个服务的回调函数中，返回了包含上述 HTML 代码的响应体。</li>
<li>最后通过<code>server.listen</code>监听了<code>8080</code>端口，并在服务启动时打印了提示信息。</li>
</ul>
<p>优化：</p>
<p>有没有办法解决在这里面写html代码有高亮和提示？</p>
<p>table.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF - 8&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http</span> <span class="attr">-</span> <span class="attr">equiv</span>=<span class="string">&quot;X - UA - Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE = edge&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width = device - width, initial - scale = 1.0&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">td</span>&#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:nth-child</span>(odd)&#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">background</span>: <span class="number">#819dc0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:nth-child</span>(even)&#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">background</span>: <span class="number">#f5de19</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">table</span>, <span class="selector-tag">td</span>&#123;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span></span><br><span class="line"><span class="language-css">          <span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">      </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//获取所有的 td</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> tds = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;td&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//遍历</span></span></span><br><span class="line"><span class="language-javascript">        tds.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          item.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;#222&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>node.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">//创建服务对象</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//读取文件内容</span></span><br><span class="line">  <span class="keyword">let</span> html = fs.<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/table.html&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>);</span><br><span class="line">  response.<span class="title function_">end</span>(html);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动....&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="十一、网页资源的基本加载过程">十一、网页资源的基本加载过程</h3>
<p>网页资源的加载都是循序渐进的，首先获取 HTML 的内容， 然后解析 HTML 在发送其他资源的请求，如 CSS，Javascript，图片等。 理解了这个内容对于后续的学习与成长有非常大的帮助</p>
<p>如果要对上面哪个练习进行进一步的拆分：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建服务对象</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//获取请求url的路径</span></span><br><span class="line">  <span class="keyword">let</span> &#123;pathname&#125; = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>, <span class="string">&#x27;http://127.0.0.1&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span>(pathname === <span class="string">&#x27;/&#x27;</span>)&#123;</span><br><span class="line">    <span class="comment">//读取文件内容</span></span><br><span class="line">    <span class="keyword">let</span> html = fs.<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/10_table.html&#x27;</span>);</span><br><span class="line">    response.<span class="title function_">end</span>(html); <span class="comment">//设置响应体</span></span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(pathname === <span class="string">&#x27;/index.css&#x27;</span>)&#123;</span><br><span class="line">    <span class="comment">//读取文件内容</span></span><br><span class="line">    <span class="keyword">let</span> css = fs.<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/index.css&#x27;</span>);</span><br><span class="line">    response.<span class="title function_">end</span>(css); <span class="comment">//设置响应体</span></span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(pathname === <span class="string">&#x27;/index.js&#x27;</span>)&#123;</span><br><span class="line">    <span class="comment">//读取文件内容</span></span><br><span class="line">    <span class="keyword">let</span> js = fs.<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/index.js&#x27;</span>);</span><br><span class="line">    response.<span class="title function_">end</span>(js); <span class="comment">//设置响应体</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    response.<span class="property">statusCode</span> = <span class="number">404</span>;</span><br><span class="line">    response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;h1&gt;404 Not Found&lt;/h1&gt;&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口, 启动服务</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动....&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="十二、静态资源服务">十二、静态资源服务</h3>
<p><code>静态资源</code>是指 内容长时间不发生改变的资源 ，例如图片，视频，CSS 文件，JS文件，HTML文件，字体文 件等</p>
<p><code>动态资源</code>是指 内容经常更新的资源 ，例如百度首页，网易首页，京东搜索列表页面等</p>
<h3 id="12-1网站根目录或静态资源目录">**12.1网站根目录或静态资源目录 **</h3>
<p>HTTP 服务在哪个文件夹中寻找静态资源，那个文件夹就是 静态资源目录 ，也称之为 网站根目录</p>
<blockquote>
<p>思考：vscode 中使用 live-server 访问 HTML 时， 它启动的服务中网站根目录是谁？</p>
</blockquote>
<p>以打开文件夹</p>
<h3 id="12-2-网页中的-URL">12.2 网页中的 URL</h3>
<p>网页中的 URL 主要分为两大类：相对路径与绝对路径</p>
<h4 id="12-2-1-绝对路径">12.2.1 绝对路径</h4>
<p>绝对路径可靠性强，而且相对容易理解，在项目中运用较多</p>
<table>
<thead>
<tr>
<th>形式</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>http://yjy.com/web</code></td>
<td>直接向目标资源发送请求，容易理解。网站的外链会用到此形式</td>
</tr>
<tr>
<td><code>//yjy.com/web</code></td>
<td>与页面 URL 的协议拼接形成完整 URL 再发送请求。大型网站用的比较多</td>
</tr>
<tr>
<td><code>/web</code></td>
<td>与页面 URL 的协议、主机名、端口拼接形成完整 URL 再发送请求。中小型网站</td>
</tr>
</tbody>
</table>
<h4 id="12-2-2-相对路径">12.2.2 相对路径</h4>
<p>相对路径在发送请求时，需要与当前页面 URL 路径进行 <code>计算</code>，得到完整 URL 后，再发送请求，学习阶段用的较多</p>
<p>例如当前网页 url 为 <code>http://www.yjy.com/course/h5.html</code></p>
<table>
<thead>
<tr>
<th>形式</th>
<th>最终的 URL</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.css/app.css</code></td>
<td><code>http://www.yjy.com/course/css/app.css</code></td>
</tr>
<tr>
<td><code>js/app.js</code></td>
<td><code>http://www.yjy.com/course/js/app.js</code></td>
</tr>
<tr>
<td><code>../img/logo.png</code></td>
<td><code>http://www.yjy.com/img/logo.png</code></td>
</tr>
<tr>
<td><code>../../mp4/show.mp4</code></td>
<td><code>http://www.yjy.com/mp4/show.mp4</code></td>
</tr>
</tbody>
</table>
<h4 id="12-2-3-网页中使用-URL-的场景小结">12.2.3 网页中使用 URL 的场景小结</h4>
<p>包括但不限于如下场景：</p>
<ul>
<li>a 标签 href</li>
<li>link 标签 href</li>
<li>script 标签 src</li>
<li>img 标签 src</li>
<li>video audio 标签 src</li>
<li>form 中的 action</li>
<li>AJAX 请求中的 URL</li>
</ul>
<h4 id="12-3-设置资源类型（mime类型）">12.3 设置资源类型（mime类型）</h4>
<p>媒体类型（通常称为 Multipurpose Internet Mail Extensions 或 MIME 类型）是一种标准，用来表示文档、文件或字节流的性质和格式。</p>
<p>mime 类型结构： [type]/[subType]</p>
<p>例如： text/html  text/css  image/jpeg  image/png  application/json</p>
<p>HTTP 服务可以设置响应头 Content-Type 来表明响应体的 MIME 类型，浏览器会根据该类型决定如何处理资源</p>
<p>下面是常见文件对应的 mime 类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">html</span>: <span class="string">&#x27;text/html&#x27;</span>,</span><br><span class="line"><span class="attr">css</span>: <span class="string">&#x27;text/css&#x27;</span>,</span><br><span class="line"><span class="attr">js</span>: <span class="string">&#x27;text/javascript&#x27;</span>,</span><br><span class="line"><span class="attr">png</span>: <span class="string">&#x27;image/png&#x27;</span>,</span><br><span class="line"><span class="attr">jpg</span>: <span class="string">&#x27;image/jpeg&#x27;</span>,</span><br><span class="line"><span class="attr">gif</span>: <span class="string">&#x27;image/gif&#x27;</span>,</span><br><span class="line"><span class="attr">mp4</span>: <span class="string">&#x27;video/mp4&#x27;</span>,</span><br><span class="line"><span class="attr">mp3</span>: <span class="string">&#x27;audio/mpeg&#x27;</span>,</span><br><span class="line"><span class="attr">json</span>: <span class="string">&#x27;application/json&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建一个 HTTP 服务，端口为 9000，满足如下需求</span></span><br><span class="line"><span class="comment"> * GET  /index.html        响应  page/index.html 的文件内容</span></span><br><span class="line"><span class="comment"> * GET  /css/app.css       响应  page/css/app.css 的文件内容</span></span><br><span class="line"><span class="comment"> * GET  /images/logo.png   响应  page/images/logo.png 的文件内容</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//导入 http 模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="comment">//声明一个变量</span></span><br><span class="line"><span class="keyword">let</span> mimes = &#123;</span><br><span class="line">  <span class="attr">html</span>: <span class="string">&#x27;text/html&#x27;</span>,</span><br><span class="line">  <span class="attr">css</span>: <span class="string">&#x27;text/css&#x27;</span>,</span><br><span class="line">  <span class="attr">js</span>: <span class="string">&#x27;text/javascript&#x27;</span>,</span><br><span class="line">  <span class="attr">png</span>: <span class="string">&#x27;image/png&#x27;</span>,</span><br><span class="line">  <span class="attr">jpg</span>: <span class="string">&#x27;image/jpeg&#x27;</span>,</span><br><span class="line">  <span class="attr">gif</span>: <span class="string">&#x27;image/gif&#x27;</span>,</span><br><span class="line">  <span class="attr">mp4</span>: <span class="string">&#x27;video/mp4&#x27;</span>,</span><br><span class="line">  <span class="attr">mp3</span>: <span class="string">&#x27;audio/mpeg&#x27;</span>,</span><br><span class="line">  <span class="attr">json</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建服务对象</span></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span>(request.<span class="property">method</span> !== <span class="string">&#x27;GET&#x27;</span>)&#123;</span><br><span class="line">    response.<span class="property">statusCode</span> = <span class="number">405</span>;</span><br><span class="line">    response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;h1&gt;405 Method Not Allowed&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//获取请求url的路径</span></span><br><span class="line">  <span class="keyword">let</span> &#123;pathname&#125; = <span class="keyword">new</span> <span class="title function_">URL</span>(request.<span class="property">url</span>, <span class="string">&#x27;http://127.0.0.1&#x27;</span>);</span><br><span class="line">  <span class="comment">//声明一个变量</span></span><br><span class="line">  <span class="keyword">let</span> root = __dirname + <span class="string">&#x27;/page&#x27;</span>;</span><br><span class="line">  <span class="comment">// let root = __dirname + &#x27;/../&#x27;;</span></span><br><span class="line">  <span class="comment">//拼接文件路径</span></span><br><span class="line">  <span class="keyword">let</span> filePath = root + pathname;</span><br><span class="line">  <span class="comment">//读取文件 fs 异步 API</span></span><br><span class="line">  fs.<span class="title function_">readFile</span>(filePath, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">      <span class="comment">//设置字符集</span></span><br><span class="line">      response.<span class="title function_">setHeader</span>(<span class="string">&#x27;content-type&#x27;</span>,<span class="string">&#x27;text/html;charset=utf-8&#x27;</span>);</span><br><span class="line">      <span class="comment">//判断错误的代号</span></span><br><span class="line">      <span class="keyword">switch</span>(err.<span class="property">code</span>)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;ENOENT&#x27;</span>:</span><br><span class="line">          response.<span class="property">statusCode</span> = <span class="number">404</span>;</span><br><span class="line">          response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;h1&gt;404 Not Found&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;EPERM&#x27;</span>:</span><br><span class="line">          response.<span class="property">statusCode</span> = <span class="number">403</span>;</span><br><span class="line">          response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;h1&gt;403 Forbidden&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">          response.<span class="property">statusCode</span> = <span class="number">500</span>;</span><br><span class="line">          response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;h1&gt;Internal Server Error&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取文件的后缀名</span></span><br><span class="line">    <span class="keyword">let</span> ext = path.<span class="title function_">extname</span>(filePath).<span class="title function_">slice</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//获取对应的类型</span></span><br><span class="line">    <span class="keyword">let</span> type = mimes[ext];</span><br><span class="line">    <span class="keyword">if</span>(type)&#123;</span><br><span class="line">      <span class="comment">//匹配到了                          text/html;charset=utf-8</span></span><br><span class="line">      <span class="keyword">if</span>(ext === <span class="string">&#x27;html&#x27;</span>)&#123;</span><br><span class="line">        response.<span class="title function_">setHeader</span>(<span class="string">&#x27;content-type&#x27;</span>, type + <span class="string">&#x27;;charset=utf-8&#x27;</span>);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        response.<span class="title function_">setHeader</span>(<span class="string">&#x27;content-type&#x27;</span>, type);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="comment">//没有匹配到</span></span><br><span class="line">      response.<span class="title function_">setHeader</span>(<span class="string">&#x27;content-type&#x27;</span>, <span class="string">&#x27;application/octet-stream&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//响应文件内容</span></span><br><span class="line">    response.<span class="title function_">end</span>(data);</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口, 启动服务</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">9000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动....&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>对于未知的资源类型，可以选择 <code>application/octet-stream</code> 类型，浏览器在遇到该类型的响应时，会对响应体内容进行独立存储，也就是我们常见的 <strong>下载</strong> 效果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>).<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 获取请求的方法以及路径</span></span><br><span class="line">    <span class="keyword">let</span> &#123;url, method&#125; = request;</span><br><span class="line">    <span class="comment">// 判断请求方式以及请求路径</span></span><br><span class="line">    <span class="keyword">if</span> (method === <span class="string">&quot;GET&quot;</span> &amp;&amp; url === <span class="string">&quot;/index.html&quot;</span>) &#123;</span><br><span class="line">        <span class="comment">// 需要响应文件中的内容</span></span><br><span class="line">        <span class="keyword">let</span> data = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>).<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/index.html&#x27;</span>);</span><br><span class="line">        response.<span class="title function_">end</span>(data);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method === <span class="string">&quot;GET&quot;</span> &amp;&amp; url === <span class="string">&quot;/css/app.css&quot;</span>) &#123;</span><br><span class="line">        <span class="comment">// 需要响应文件中的内容</span></span><br><span class="line">        <span class="keyword">let</span> data = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>).<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/public/css/app.css&#x27;</span>);</span><br><span class="line">        <span class="comment">// 这里缺少设置Content-Type响应头</span></span><br><span class="line">        response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/css&#x27;</span>);</span><br><span class="line">        response.<span class="title function_">end</span>(data);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method === <span class="string">&quot;GET&quot;</span> &amp;&amp; url === <span class="string">&quot;/js/app.js&quot;</span>) &#123;</span><br><span class="line">        <span class="comment">// 需要响应文件中的内容</span></span><br><span class="line">        <span class="keyword">let</span> data = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>).<span class="title function_">readFileSync</span>(__dirname + <span class="string">&#x27;/public/js/app.js&#x27;</span>);</span><br><span class="line">        <span class="comment">// 这里缺少设置Content-Type响应头</span></span><br><span class="line">        response.<span class="title function_">setHeader</span>(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/javascript&#x27;</span>);</span><br><span class="line">        response.<span class="title function_">end</span>(data);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 404响应</span></span><br><span class="line">        response.<span class="property">statusCode</span> = <span class="number">404</span>;</span><br><span class="line">        response.<span class="title function_">end</span>(<span class="string">&quot;&lt;h1&gt;404 Not Found&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;80端口正在启动中....&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="改进-HTTP-服务器代码（文件路径封装）">改进 HTTP 服务器代码（文件路径封装）</h4>
<p><strong>原始问题</strong>：之前的代码每增加一个请求路径就需要进行单独判断，不够灵活和完善。</p>
<p><strong>改进思路</strong>：将文件路径相关逻辑进行封装，实现通用的文件请求处理。</p>
<p><strong>改进代码</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 获取请求的方法已经路径</span></span><br><span class="line">    <span class="keyword">let</span> &#123; url, method &#125; = request;</span><br><span class="line">    <span class="comment">// 文件夹路径</span></span><br><span class="line">    <span class="keyword">let</span> rootDir = __dirname + <span class="string">&#x27;/public&#x27;</span>;</span><br><span class="line">    <span class="comment">// 拼接文件路径</span></span><br><span class="line">    <span class="keyword">let</span> filePath = rootDir + url;</span><br><span class="line">    <span class="comment">// 读取文件内容</span></span><br><span class="line">    fs.<span class="title function_">readFile</span>(filePath, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="comment">// 如果出现错误，响应 404 状态码</span></span><br><span class="line">            response.<span class="property">statusCode</span> = <span class="number">404</span>;</span><br><span class="line">            response.<span class="title function_">end</span>(<span class="string">&#x27;&lt;h1&gt;404 Not Found&lt;/h1&gt;&#x27;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 响应文件内容</span></span><br><span class="line">            response.<span class="title function_">end</span>(data);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">80</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;80 端口正在启动中....&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="12-4-GET-和-POST-请求场景小结">12.4 GET 和 POST 请求场景小结</h4>
<h4 id="GET-请求的情况：">GET 请求的情况：</h4>
<ul>
<li>在地址栏直接输入 url 访问</li>
<li>点击 a 链接</li>
<li>link 标签引入 css</li>
<li>script 标签引入 js</li>
<li>img 标签引入图片</li>
<li>form 标签中的 method 为 get （不区分大小写）</li>
<li>ajax 中的 get 请求</li>
</ul>
<h4 id="POST-请求的情况：">POST 请求的情况：</h4>
<ul>
<li>form 标签中的 method 为 post （不区分大小写）</li>
<li>AJAX 的 post 请求</li>
</ul>
<h3 id="十三、GET-和-POST-请求的区别">十三、GET 和 POST 请求的区别</h3>
<p>GET 和 POST 是 HTTP 协议请求的两种方式。</p>
<ul>
<li>作用：GET 主要用来获取数据，POST 主要用来提交数据</li>
<li>参数位置：GET 带参数请求是将参数缀到 URL 之后，在地址栏中输入 url 访问网站就是 GET 请求 POST 带参数请求是将参数放到请求体中</li>
<li>安全性：POST 请求相对 GET 安全一些，因为在浏览器中参数会暴露在地址栏</li>
<li>GET 请求大小有限制，一般为 2K，而 POST 请求则没有大小限制</li>
</ul>
<h2 id="Node-js-模块化">Node.js 模块化</h2>
<h4 id="一、介绍">一、介绍</h4>
<ol>
<li><strong>什么是模块化与模块？</strong> 将一个复杂的程序文件依据一定规则 (规范) 拆分成多个文件的过程称之为 <strong>模块化</strong></li>
</ol>
<p>其中拆分出的 <strong>每个文件就是一个模块</strong>，模块的内部数据是私有的，不过模块可以暴露内部数据以便其他模块使用</p>
<ol>
<li><strong>什么是模块化项目？</strong> 编码时是按照模块一个一个编码的，整个项目就是一个模块化的项目</li>
<li><strong>模块化好处</strong> 下面是模块化的一些好处：
<ul>
<li>防止命名冲突</li>
<li>高复用性</li>
<li>高维护性</li>
</ul>
</li>
</ol>
<h3 id="二、模块暴露数据">二、模块暴露数据</h3>
<h4 id="2-1-模块初体验">2.1 模块初体验</h4>
<p>可以通过下面的操作步骤，快速体验模块化：</p>
<ol>
<li><strong>创建 <code>me.js</code></strong></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tiemo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;贴膜....&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//暴露数据</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = tiemo;</span><br></pre></td></tr></table></figure>
<ol>
<li><strong>创建 <code>index.js</code></strong></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入模块</span></span><br><span class="line"><span class="keyword">const</span> tiemo = <span class="built_in">require</span>(<span class="string">&#x27;./me.js&#x27;</span>);</span><br><span class="line"><span class="comment">//调用函数</span></span><br><span class="line"><span class="title function_">tiemo</span>();</span><br></pre></td></tr></table></figure>
<h3 id="2-2-暴露数据">2.2 暴露数据</h3>
<p>模块暴露数据的方式有两种：</p>
<ol>
<li><code>module.exports = value</code></li>
<li><code>exports.name = value</code></li>
</ol>
<p>使用时有几点注意：</p>
<ul>
<li><code>module.exports</code> 可以暴露 <strong>任意</strong> 数据</li>
<li>不能使用 <code>exports = value</code> 的形式暴露数据，模块内部 <code>module</code> 与 <code>exports</code> 的隐式关系 <code>exports = module.exports = &#123;&#125;</code>，<code>require</code> 返回的是目标模块中 <code>module.exports</code> 的值</li>
</ul>
<p><img src="./nodejs(1).assets/image-20250610110144642.png" alt="image-20250610110144642"></p>
<h3 id="三、导入（引入）模块">三、导入（引入）模块</h3>
<p>在模块中使用 <code>require</code> 传入文件路径即可引入文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = <span class="built_in">require</span>(<span class="string">&#x27;./me.js&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p><code>require</code> 使用的一些注意事项：</p>
<ol>
<li>对于自己创建的模块，导入时路径建议写 <code>相对路径</code> ，且不能省略 <code>./</code> 和 <code>../</code></li>
<li><code>js</code> 和 <code>json</code> 文件导入时可以不用写后缀，<code>c/c++</code> 编写的 <code>node</code> 扩展文件也可以不写后缀，但是一般用不到</li>
<li>如果导入其他类型的文件，会以 <code>js</code> 文件进行处理</li>
<li>如果导入的路径是个文件夹，则会 <strong>首先</strong> 检测该文件夹下 <code>package.json</code> 文件中 <code>main</code> 属性对应的文件，</li>
</ol>
<p>如果存在则导入，反之如果文件不存在会报错。</p>
<p>如果 <code>main</code> 属性不存在，或者 <code>package.json</code> 不存在，则会尝试导入文件夹下的 <code>index.js</code> 和 <code>index.json</code>，</p>
<p>如果还是没找到，就会报错 5. 导入 <code>node.js</code> 内置模块时，直接 <code>require</code> 模块的名字即可，无需加 <code>./</code> 和 <code>../</code></p>
<h3 id="四、导入模块的基本流程">四、导入模块的基本流程</h3>
<p>这里我们介绍一下 <code>require</code> 导入 <strong>自定义模块</strong> 的基本流程</p>
<ol>
<li>将相对路径转为绝对路径, 定位目标文件</li>
<li>缓存检测</li>
<li>读取目标文件代码</li>
<li>包裹为一个函数并执行 (自执行函数)。通过 <code>arguments.callee.toString()</code> 查看自执行函数</li>
<li>缓存模块的值</li>
<li>返回 <code>module.exports</code> 的值</li>
</ol>
<p><img src="./nodejs(1).assets/image-20250610110529684.png" alt="image-20250610110529684"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 伪代码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">require</span>(<span class="params">file</span>)&#123;</span><br><span class="line">  <span class="comment">//1. 将相对路径转为绝对路径，定位目标文件</span></span><br><span class="line">  <span class="keyword">let</span> absolutePath = path.<span class="title function_">resolve</span>(__dirname, file);</span><br><span class="line">  <span class="comment">//2. 缓存检测</span></span><br><span class="line">  <span class="keyword">if</span>(caches[absolutePath])&#123;</span><br><span class="line">    <span class="keyword">return</span> caches[absolutePath];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//3. 读取文件的代码</span></span><br><span class="line">  <span class="keyword">let</span> code = fs.<span class="title function_">readFileSync</span>(absolutePath).<span class="title function_">toString</span>();</span><br><span class="line">  <span class="comment">//4. 包裹为一个函数 然后执行</span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable language_">module</span> = &#123;&#125;;</span><br><span class="line">  <span class="keyword">let</span> <span class="built_in">exports</span> = <span class="variable language_">module</span>.<span class="property">exports</span> = &#123;&#125;;</span><br><span class="line">  (<span class="keyword">function</span> (<span class="params"><span class="built_in">exports</span>, <span class="built_in">require</span>, <span class="variable language_">module</span>, __filename, __dirname</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> test = &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;yjy&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="variable language_">module</span>.<span class="property">exports</span> = test;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//输出</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>.<span class="property">callee</span>.<span class="title function_">toString</span>());</span><br><span class="line">  &#125;)(<span class="built_in">exports</span>, <span class="built_in">require</span>, <span class="variable language_">module</span>, __filename, __dirname)</span><br><span class="line">  <span class="comment">//5. 缓存结果</span></span><br><span class="line">  caches[absolutePath] = <span class="variable language_">module</span>.<span class="property">exports</span>;</span><br><span class="line">  <span class="comment">//6. 返回 module.exports 的值</span></span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">module</span>.<span class="property">exports</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> m = <span class="built_in">require</span>(<span class="string">&#x27;./me.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="五、CommonJS-规范">五、CommonJS 规范</h3>
<p><code>module.exports</code>、<code>exports</code> 以及 <code>require</code> 这些都是 <strong>CommonJS</strong> 模块化规范中的内容。</p>
<p>而 Node.js 是实现了 <strong>CommonJS</strong> 模块化规范，二者关系有点像 <code>JavaScript</code> 与 <code>ECMAScript</code>。</p>
<p>CommonJS 规范规定：</p>
<ul>
<li>
<p>每个文件就是一个模块，拥有独立的作用域。</p>
</li>
<li>
<p>模块内部通过</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span>.<span class="keyword">exports</span></span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span></span><br></pre></td></tr></table></figure>
<p>暴露数据。</p>
<ul>
<li><code>module.exports</code> 可以暴露任意类型的值（对象、函数、基本数据类型等）。</li>
<li><code>exports</code> 实际上是 <code>module.exports</code> 的一个引用（<code>exports = module.exports = &#123;&#125;</code>），所以通过 <code>exports.xxx = value</code> 的方式可以为 <code>module.exports</code> 对象添加属性。但不能直接给 <code>exports</code> 赋值（如 <code>exports = value</code>），否则会切断与 <code>module.exports</code> 的联系。</li>
</ul>
</li>
<li>
<p>模块之间通过 <code>require</code> 函数导入其他模块暴露出来的数据。</p>
</li>
</ul>
<p>在 Node.js 中遵循 CommonJS 规范进行模块化开发，使得代码的组织和复用更加方便、规范。例如：</p>
<p><strong>模块 A（<code>moduleA.js</code>）</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 暴露一个函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = add;</span><br></pre></td></tr></table></figure>
<p><strong>模块 B（<code>moduleB.js</code>）</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入模块 A</span></span><br><span class="line"><span class="keyword">const</span> add = <span class="built_in">require</span>(<span class="string">&#x27;./moduleA.js&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">add</span>(<span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// 输出 8</span></span><br></pre></td></tr></table></figure>
<p>这样，通过 <code>module.exports</code> 暴露函数，<code>require</code> 导入并使用，实现了模块间的功能复用和代码组织。</p>
<p>CommonJS 规范在服务器端（如 Node.js 环境）应用广泛，它的同步加载机制（在服务器端，文件读取等操作相对快速且对同步性要求较高）是其特点之一。但在浏览器端，由于同步加载会阻塞页面渲染等问题，后来出现了其他模块化规范（如 AMD、CMD、ES6 模块等）来适应浏览器环境的需求。不过在 Node.js 中，CommonJS 规范依然是核心的模块化方式，并且非常适合服务器端的开发场景，如构建 Web 服务器、处理文件 I/O 等任务时的代码模块化组织。</p>
<h2 id="包管理工具">包管理工具</h2>
<p>像极了哆啦A梦的口袋</p>
<h3 id="一、概念介绍">一、概念介绍</h3>
<h3 id="1-1-包是什么">1.1 包是什么</h3>
<p>『包』英文单词是 <code>package</code> ，代表了一组特定功能的源码集合</p>
<h3 id="1-2-包管理工具">1.2 包管理工具</h3>
<p>管理『包』的应用软件，可以对「包」进行 <code>下载安装</code> ， <code>更新</code> ， <code>删除</code> ， <code>上传</code> 等操作</p>
<p>借助包管理工具，可以快速开发项目，提升开发效率</p>
<p>包管理工具是一个通用的概念，很多编程语言都有包管理工具，所以 <code>掌握好包管理工具非常重要</code></p>
<h3 id="1-3-常用的包管理工具">1.3 常用的包管理工具</h3>
<p>下面列举了前端常用的包管理工具</p>
<ul>
<li><code>npm</code></li>
<li><code>yarn</code></li>
<li><code>cnpm</code></li>
</ul>
<h3 id="二、npm">二、npm</h3>
<p><code>npm</code> 全称 <code>Node Package Manager</code> ，翻译为中文意思是『Node 的包管理工具』</p>
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm` 是 `node.js` 官方内置的包管理工具，是 `必须要掌握住的工具</span><br></pre></td></tr></table></figure>
<h4 id="2-1-npm-的安装">2.1 npm 的安装</h4>
<p>node.js 在安装时会 自动安装 npm ，所以如果你已经安装了 node.js，可以直接使用 npm 可以通过 npm -v 查看版本号测试，如果显示版本号说明安装成功，反之安装失败</p>
<h3 id="2-2-npm-基本使用">2.2 npm 基本使用</h3>
<h4 id="2-2-1-初始化">2.2.1 初始化</h4>
<p>创建一个空目录，然后以此目录作为工作目录 启动命令行工具 ，执行 npm init</p>
<p>npm init 命令的作用是将文件夹初始化为一个『包』，</p>
<p>交互式创建 package.json 文件 package.json 是包的配置文件，每个包都必须要有 package.json</p>
<p>package.json 内容示例</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;01_npm&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1-npm&quot;</span><span class="punctuation">,</span>       #包的名字</span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span>      #包的版本</span><br><span class="line">    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span>       #包的描述</span><br><span class="line">    <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span>      #包的入口文件</span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>             #脚本配置</span><br><span class="line">        <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span>            #作者</span><br><span class="line">    <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span>         #开源证书</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="初始化的过程中还有一些注意事项：">初始化的过程中还有一些注意事项：</h3>
<ol>
<li>package name( 包名 )不能使用中文、大写，默认值是 文件夹的名称 ，所以文件夹名称也不能使用中文和大写</li>
<li>version( 版本号 )要求 x.x.x 的形式定义， x 必须是数字，默认值是 1.0.0</li>
<li>ISC 证书与 MIT 证书功能上是相同的，关于开源证书扩展阅读 <a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html">http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html</a></li>
<li>package.json 可以手动创建与修改</li>
<li>使用 npm init -y 或者 npm init --yes 极速创建 package.json</li>
</ol>
<h3 id="2-2-2-搜索包">2.2.2 搜索包</h3>
<p>搜索包的方式有两种：</p>
<ol>
<li>命令行：<a target="_blank" rel="noopener" href="https://docs.npmjs.com/cli/v9/commands/npm%E2%88%92search">npms/search关键字</a><a target="_blank" rel="noopener" href="https://docs.npmjs.com/cli/v9/commands/npm%E2%88%92search">npms/search关键字</a></li>
<li>网站搜索：网址是 <a target="_blank" rel="noopener" href="https://www.npmjs.com/">https://www.npmjs.com/</a></li>
</ol>
<p>经常有同学问，『我怎样才能精准找到我需要的包？』</p>
<p>这个事儿需要大家在实践中不断的积累，通过看文章，看项目去学习去积累。</p>
<h3 id="2-2-3-下载安装包">2.2.3 下载安装包</h3>
<p>我们可以通过 <code>npm install</code> 和 <code>npm i</code> 命令安装包。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 格式</span></span><br><span class="line">npm install &lt;包名&gt;</span><br><span class="line">npm i &lt;包名&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 示例 移除数组当中的重复内容</span></span><br><span class="line">npm install <span class="built_in">uniq</span></span><br><span class="line">npm i <span class="built_in">uniq</span></span><br></pre></td></tr></table></figure>
<p>运行之后文件夹下会增加两个资源：</p>
<ul>
<li><code>node_modules</code> 文件夹：存放下载的包</li>
<li><code>package-lock.json</code>：包的锁文件，用来锁定包的版本</li>
</ul>
<blockquote>
<p>安装 <code>uniq</code> 之后， <code>uniq</code> 就是当前这个包的一个依赖包，有时会简称为依赖。</p>
<p>比如我们创建一个包名字为 <code>A</code>，<code>A</code> 中安装了包名字是 <code>B</code>，我们就说 <code>B</code> 是 <code>A</code> 的一个依赖包，也会说 <code>A</code> 依赖 <code>B</code>。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.导入</span></span><br><span class="line"><span class="keyword">const</span> uniq = <span class="built_in">require</span>(<span class="string">&#x27;uniq&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.使用</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">uniq</span>(arr));</span><br></pre></td></tr></table></figure>
<figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="name">D</span>:\Note\code\nodejs\test&gt;npm i uniq</span><br><span class="line"></span><br><span class="line">added <span class="number">1</span> <span class="built_in">package</span> <span class="keyword">in</span> <span class="number">4</span>s</span><br><span class="line"></span><br><span class="line"><span class="name">D</span>:\Note\code\nodejs\test&gt;node index.js</span><br><span class="line">[ <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ]</span><br></pre></td></tr></table></figure>
<h3 id="2-2-4-require-导入-npm-包基本流程">2.2.4 <code>require</code> 导入 npm 包基本流程</h3>
<ol>
<li>在当前文件夹下 <code>node_modules</code> 中寻找同名的文件夹。</li>
<li>在上级目录中下的 <code>node_modules</code> 中寻找同名的文件夹，直至找到磁盘根目录。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.导入</span></span><br><span class="line"><span class="comment">// const uniq = require(&#x27;uniq&#x27;);//导入的是node_modules目录下的uniq模块 推荐这个 优势：找不到会往上找 直到找到 /</span></span><br><span class="line"><span class="comment">// const uniq = require(&#x27;./node_modules/uniq&#x27;);  //导入文件夹  逻辑是去这个文件夹当中找package.json当中main属性所对应的文件</span></span><br><span class="line"><span class="comment">// const uniq = require(&#x27;./node_modules/uniq/uniq.js&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.使用</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">uniq</span>(arr));</span><br></pre></td></tr></table></figure>
<h3 id="2-3-生产环境与开发环境">2.3 生产环境与开发环境</h3>
<p>开发环境是程序员<code>专门用来写代码</code>的环境，一般是指程序员的电脑，开发环境的项目一般<code>只能程序员自己访问</code>。</p>
<p>生产环境是项目<code>代码正式运行</code>的环境，一般是指正式的服务器电脑，生产环境的项目一般<code>每个客户都可以访问</code>。</p>
<h3 id="2-4-生产依赖与开发依赖">2.4 生产依赖与开发依赖</h3>
<p>我们可以在安装时设置选项来区分依赖的类型，目前分为两类：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>命令</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>生产依赖</td>
<td>npm i -S uniq / npm i --save uniq</td>
<td>-S 等效于 --save，-S 是默认选项包信息保存在 package.json 中 dependencies 属性</td>
</tr>
<tr>
<td>开发依赖</td>
<td>npm i -D less / npm i --save-dev less</td>
<td>-D 等效于 --save-dev包信息保存在 package.json 中 devDependencies 属性</td>
</tr>
</tbody>
</table>
<blockquote>
<p>举个例子方便大家理解，比如说做蛋炒饭需要大米，油，葱，鸡蛋，锅，煤气，铲子等。</p>
<p>其中锅，煤气，铲子属于开发依赖，只在制作阶段使用。</p>
<p>而大米，油，葱，鸡蛋属于生产依赖，在制作与最终食用都会用到。</p>
<p>所以开发依赖是只在开发阶段使用的依赖包，而生产依赖是开发阶段和最终上线运行阶段都用到的依赖包。</p>
</blockquote>
<h3 id="2-5-全局安装">2.5 全局安装</h3>
<p>我们可以执行安装选项 <code>-g</code> 进行全局安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g nodemon </span><br></pre></td></tr></table></figure>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">D</span>:\<span class="keyword">Note</span>\code\nodejs\<span class="keyword">test</span>&gt;npm i -<span class="keyword">g</span> nodemon </span><br><span class="line"></span><br><span class="line">added 29 packages <span class="keyword">in</span> 4s</span><br><span class="line"></span><br><span class="line">4 packages are looking <span class="keyword">for</span> funding</span><br><span class="line">  <span class="keyword">run</span> `npm fund` <span class="keyword">for</span> details</span><br></pre></td></tr></table></figure>
<p>全局安装完成之后就可以在命令行的任何位置运行 <code>nodemon</code> 命令。 该命令的作用是 <strong>自动重启</strong> <code>node</code> 应用程序。</p>
<p><strong>说明</strong>：</p>
<ul>
<li>全局安装的命令不受工作目录位置影响。</li>
<li>可以通过 <code>npm root -g</code> 查看全局安装包的位置。</li>
<li>不是所有的包都适合全局安装，只有全局类的工具才适合，可以通过 <strong>查看包的官方文档</strong> 来确定安装方式。</li>
</ul>
<h3 id="2-5-1-修改-Windows-执行策略">2.5.1 修改 Windows 执行策略</h3>
<p><img src="./nodejs(1).assets/image-20250610120349606.png" alt="image-20250610120349606"></p>
<p>windows 默认不允许 npm 全局命令执行脚本文件，所以需要修改执行策略</p>
<ol>
<li>以 管理员身份 打开 powershell 命令行</li>
</ol>
<p><img src="./nodejs(1).assets/image-20250610120420231.png" alt="image-20250610120420231"></p>
<ol start="2">
<li>键入命令 set-ExecutionPolicy remoteSigned</li>
</ol>
<p><img src="./nodejs(1).assets/image-20250610120442762.png" alt="image-20250610120442762"></p>
<ol start="3">
<li>
<p>键入 A 然后敲回车 👌 4. 如果不生效，可以尝试重启 vscode</p>
<p>npm i -g nodemon</p>
</li>
</ol>
<blockquote>
<p>D:\Note\code\nodejs\test&gt;npm install -g nodemon</p>
<p>changed 29 packages in 2s</p>
<p>D:\Note\code\nodejs\test&gt;nodemon index.js<br>
‘nodemon’ 不是内部或外部命令，也不是可运行的程序</p>
</blockquote>
<p>解决：</p>
<blockquote>
<p>遇到的 “nodemon’ 不是内部或外部命令，也不是可运行的程序或批处理文件” 的问题，通常是由于以下几个原因造成的，即使您已经配置了环境变量：</p>
<ol>
<li>
<p><strong>环境变量配置未生效或配置错误：</strong></p>
<ul>
<li>
<p><strong>未重启命令行工具或计算机：</strong> 修改环境变量后，需要重新打开命令行工具（如 CMD 或 PowerShell）才能使新的环境变量生效。有时甚至需要重启计算机。</p>
</li>
<li>
<p>路径错误：</p>
<p>请确保您在系统环境变量</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Path</span></span><br></pre></td></tr></table></figure>
<p>中添加的路径是</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span></span><br></pre></td></tr></table></figure>
<p>全局安装模块的正确路径。您可以通过以下命令查看</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span></span><br></pre></td></tr></table></figure>
<p>的全局安装路径（prefix）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config get prefix</span><br></pre></td></tr></table></figure>
<p>假设该命令返回的路径是</p>
<figure class="highlight moonscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="name">C</span>:\Users\YourUsername\AppData\Roaming\npm</span><br></pre></td></tr></table></figure>
<p>(这只是一个例子，您的路径可能不同)，那么您需要确保这个路径（或者这个路径下的</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node_modules\<span class="string">.bin</span></span><br></pre></td></tr></table></figure>
<p>目录，具体取决于您的 Node.js 和 npm 版本及配置）被添加到了系统环境变量</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Path</span></span><br></pre></td></tr></table></figure>
<p>中。</p>
</li>
<li>
<p><strong>用户变量与系统变量：</strong> 建议将 Node.js 和 npm 相关的路径添加到系统变量的 <code>Path</code> 中，而不是用户变量的 <code>Path</code> 中，以确保所有用户和所有终端都能访问。</p>
</li>
<li>
<p><strong>NODE_PATH 环境变量：</strong> 有些教程可能会提到配置 <code>NODE_PATH</code>，但 <code>NODE_PATH</code> 主要用于 <code>require</code> 模块时的查找路径，对于命令行工具的识别，关键在于 <code>Path</code> 环境变量。</p>
</li>
</ul>
</li>
<li>
<p><strong>npm 全局安装路径问题：</strong></p>
<ul>
<li><strong>自定义了全局安装路径：</strong> 如果您之前通过 <code>npm config set prefix &quot;新的路径&quot;</code> 命令修改了 npm 的全局安装路径，那么您需要将这个“新的路径”添加到系统环境变量 <code>Path</code> 中。 例如，如果您将全局路径设置为 <code>D:\nodejs\node_global</code>，那么 <code>D:\nodejs\node_global</code> 需要在 <code>Path</code> 环境变量中。</li>
<li><strong><code>node_modules\.bin</code> 目录：</strong> 全局安装的命令行工具（如 nodemon）的可执行文件通常位于全局安装路径下的 <code>node_modules\.bin</code> 目录。请确保这个 <code>.bin</code> 目录也包含在 <code>Path</code> 环境变量中，或者其父目录已在 <code>Path</code> 中且 npm 能正确处理。</li>
</ul>
</li>
<li>
<p><strong>安装问题：</strong></p>
<ul>
<li>
<p>nodemon 未成功全局安装：</p>
<p>虽然提示</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">changed</span> <span class="number">29</span> packages</span><br></pre></td></tr></table></figure>
<p>，但可能存在某些原因导致</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nodemon</span></span><br></pre></td></tr></table></figure>
<p>没有正确安装到预期的全局位置。您可以尝试重新全局安装</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nodemon</span></span><br></pre></td></tr></table></figure>
<p>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall -g nodemon</span><br><span class="line">npm install -g nodemon</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>权限问题：</strong> 在某些情况下，尤其是在 Windows 上，可能需要以管理员权限运行命令行工具来执行全局安装命令 <code>npm install -g nodemon</code>。</p>
</li>
</ul>
</li>
<li>
<p><strong>PowerShell 执行策略 (如果使用 PowerShell)：</strong></p>
<ul>
<li>
<p>如果是在 PowerShell 中运行</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nodemon</span></span><br></pre></td></tr></table></figure>
<p>命令，并且遇到类似“无法加载文件…因为在此系统上禁止运行脚本”的错误，这可能是由于 PowerShell 的执行策略限制。 你可以尝试以管理员身份打开 PowerShell，然后运行以下命令来更改执行策略：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-ExecutionPolicy</span> RemoteSigned</span><br></pre></td></tr></table></figure>
<p>然后按提示输入</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Y</span></span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">A</span></span><br></pre></td></tr></table></figure>
<p>。</p>
<p>请注意：</p>
<p>更改执行策略可能会带来安全风险，请了解其含义后再操作。</p>
</li>
</ul>
</li>
</ol>
<p><strong>排查步骤建议：</strong></p>
<ol>
<li>
<p><strong>确认 npm 全局路径：</strong><br>
打开新的命令行窗口，输入 <code>npm config get prefix</code>，记录下输出的路径。</p>
</li>
<li>
<p>检查环境变量 <code>Path</code>：</p>
<ul>
<li>打开“我的电脑”或“此电脑” -&gt; 右键“属性” -&gt; “高级系统设置” -&gt; “环境变量”。</li>
<li>在“系统变量”下找到名为 <code>Path</code> 的变量，双击编辑。</li>
<li>确认上一步得到的 <code>npm</code> 全局路径（例如 <code>C:\Users\YourUsername\AppData\Roaming\npm</code> 或者您自定义的全局路径如 <code>D:\nodejs\node_global</code>）是否已经添加到了 <code>Path</code> 变量列表中。 如果没有，请添加它。</li>
</ul>
</li>
<li>
<p><strong>重启命令行/计算机：</strong> 修改环境变量后，务必关闭所有已打开的命令行窗口，然后重新打开一个新的，或者直接重启计算机。</p>
</li>
<li>
<p>重新尝试运行 <code>nodemon</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nodemon --version</span><br><span class="line">nodemon index.js</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>检查 <code>nodemon</code> 是否在全局路径下：</strong><br>
导航到 <code>npm config get prefix</code> 返回的路径，查看该路径下是否有 <code>nodemon</code> 或 <code>nodemon.cmd</code> 文件，以及是否存在 <code>node_modules\.bin</code> 文件夹，里面是否有 <code>nodemon</code> 相关文件。</p>
</li>
<li>
<p>尝试使用 <code>npx</code>：</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">npx</span></span><br></pre></td></tr></table></figure>
<p>是 npm 5.2+ 自带的工具，可以运行本地或远程 npm 包中的命令，即使没有全局安装。可以临时用它来测试：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx nodemon index.js</span><br></pre></td></tr></table></figure>
<p>如果这个命令能成功运行，说明</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nodemon</span></span><br></pre></td></tr></table></figure>
<p>本身是好的，问题更可能出在全局环境配置上。</p>
</li>
</ol>
<p>如果以上步骤都无法解决问题，请提供更多信息，例如：</p>
<ul>
<li><code>npm config get prefix</code> 的输出结果。</li>
<li>您的环境变量 <code>Path</code> 的具体内容截图或文本。</li>
<li>Node.js 和 npm 的版本 (<code>node -v</code> 和 <code>npm -v</code>)。</li>
</ul>
</blockquote>
<h3 id="2-5-2-环境变量-Path">2.5.2 环境变量 Path</h3>
<p>Path 是操作系统的一个环境变量，可以设置一些文件夹的路径，在当前工作目录下找不到可执行文件 时，就会在环境变量 Path 的目录中挨个的查找，如果找到则执行，如果没有找到就会报错</p>
<p><img src="./nodejs(1).assets/image-20250610120647937.png" alt="image-20250610120647937"></p>
<blockquote>
<h2 id="补充说明">补充说明</h2>
<ul>
<li>如果希望某个程序在任何工作目录下都能正常运行，就应该将该程序的所在目录配置到环境变量 <code>Path</code> 中。</li>
<li>windows 下查找命令的所在位置
<ul>
<li><code>cmd</code> 命令行 中执行 <code>where nodemon</code>。</li>
<li><code>powershell</code> 命令行 执行 <code>get-command nodemon</code>。</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="2-6-安装包依赖">2.6 安装包依赖</h3>
<p>在项目协作中有一个常用的命令就是 <code>npm i</code>，通过该命令可以依据 <code>package.json</code> 和 <code>package-lock.json</code> 的依赖声明安装项目依赖。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p><code>node_modules</code> 文件夹大多数情况都不会存入版本库。</p>
<p>因为node_modules 非常大 我们不用把它上传到git上，只需要有package-lock.json 就可以了</p>
<h3 id="2-7-安装指定版本的包">2.7 安装指定版本的包</h3>
<p>项目中可能会遇到版本不匹配的情况，有时就需要安装指定版本的包，可以使用下面的命令。</p>
<h3 id="格式">格式</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i &lt;包名@版本号&gt;</span><br></pre></td></tr></table></figure>
<h3 id="示例">示例</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i jquery@1.11.2</span><br></pre></td></tr></table></figure>
<h3 id="2-8-删除依赖">2.8 删除依赖</h3>
<p>项目中可能需要删除某些不需要的包，可以使用下面的命令：</p>
<ul>
<li><strong>局部删除</strong>：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall <span class="built_in">uniq</span></span><br><span class="line">npm r <span class="built_in">uniq</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>全局删除</strong>：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm remove -g nodemon</span><br></pre></td></tr></table></figure>
<h3 id="2-9-配置命令别名">2.9 配置命令别名</h3>
<p>通过配置命令别名可以更简单的执行命令。</p>
<ul>
<li><strong>配置package.json中的 scripts 属性</strong>：</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node server.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node index.js&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>配置完成之后，可以使用别名执行命令</strong>：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run server</span><br><span class="line">npm run start</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：<code>start</code> 别名比较特别，使用时可以省略 <code>run</code> ：</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure>
<h4 id="补充说明：">补充说明：</h4>
<ul>
<li><code>npm start</code> 是项目中常用的一个命令，一般用来启动项目。</li>
<li><code>npm run</code> 有自动向上级目录查找的特性，跟 <code>require</code> 函数也一样。</li>
<li>对于陌生的项目，我们可以通过查看 <code>scripts</code> 属性来参考项目的一些操作。</li>
</ul>
<h3 id="三、cnpm">三、cnpm</h3>
<h4 id="3-1-介绍">3.1 介绍</h4>
<p>cnpm 是一个淘宝构建的 <code>npmjs.com</code> 的完整镜像，也称为「淘宝镜像」，网址 <a target="_blank" rel="noopener" href="https://npmmirror.com/">https://npmmirror.com/</a></p>
<p>cnpm 服务器部署在国内阿里云服务器上，可以提高包的下载速度</p>
<p>官方也提供了一个全局工具包 <code>cnpm</code>，操作命令与 npm 大体相同</p>
<h4 id="3-2-安装">3.2 安装</h4>
<p>我们可以通过 npm 来安装 cnpm 工具</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure>
<h4 id="3-3-操作命令">3.3 操作命令</h4>
<table>
<thead>
<tr>
<th>功能</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>初始化</td>
<td><code>cnpm init</code> / <code>cnpm init</code></td>
</tr>
<tr>
<td>安装包</td>
<td><code>cnpm i uniq</code> <code>cnpm i -S uniq</code> <code>cnpm i -D uniq</code> <code>cnpm i -g nodemon</code></td>
</tr>
<tr>
<td>安装项目依赖</td>
<td><code>cnpm i</code></td>
</tr>
<tr>
<td>删除</td>
<td><code>cnpm runiq</code></td>
</tr>
</tbody>
</table>
<h4 id="3-4-npm-配置淘宝镜像">3.4 npm 配置淘宝镜像</h4>
<p>用 npm 也可以使用淘宝镜像，配置的方式有两种：</p>
<ul>
<li>直接配置</li>
<li>工具配置</li>
</ul>
<h4 id="3-4-1-直接配置">3.4.1 直接配置</h4>
<p>执行如下命令即可完成配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmmirror.com/</span><br></pre></td></tr></table></figure>
<h4 id="3-4-2-工具配置（示例使用-nrm-工具）">3.4.2 工具配置（示例使用 <code>nrm</code> 工具）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. **安装 nrm**</span><br><span class="line">npm i -g nrm</span><br></pre></td></tr></table></figure>
<ol>
<li><strong>修改镜像</strong></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nrm use taobao </span><br></pre></td></tr></table></figure>
<ol>
<li><strong>检查是否配置成功（选做）</strong></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config list </span><br></pre></td></tr></table></figure>
<blockquote>
<p>检查 <code>registry</code> 地址是否为 <code>https://registry.npmmirror.com/</code>，如果 <strong>是</strong> 则表明成功</p>
</blockquote>
<h3 id="补充说明-2">补充说明:</h3>
<ol>
<li><strong>建议使用第二种方式（nrm 配置）</strong> 进行镜像配置，因为后续修改起来会比较方便</li>
<li>虽然 <code>cnpm</code> 可以提高速度，但是 <code>npm</code> 也可以通过淘宝镜像进行加速，所以 <code>npm</code> 的使用率还是高于 <code>cnpm</code></li>
</ol>
<h3 id="四、yarn">四、yarn</h3>
<h3 id="4-1-yarn-介绍">4.1 yarn 介绍</h3>
<p>yarn 是由 Facebook 在 2016 年推出的新的 Javascript 包管理工具，官方网址：<a target="_blank" rel="noopener" href="https://yarnpkg.com/">https://yarnpkg.com/</a></p>
<h3 id="4-2-yarn-特点">4.2 yarn 特点</h3>
<p>yarn 官方宣称的一些特点</p>
<ul>
<li>速度超快：yarn 缓存了每个下载过的包，所以再次使用时无需重复下载。同时利用并行下载以最大化资源利用率，因此安装速度更快</li>
<li>超级安全：在执行代码之前，yarn 会通过算法校验每个安装包的完整性</li>
<li>超级可靠：使用详细、简洁的锁文件格式和明确的安装算法，yarn 能够保证在不同系统上无差异的工作</li>
</ul>
<h3 id="4-3-yarn-安装">4.3 yarn 安装</h3>
<p>我们可以使用 npm 安装 yarn</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g yarn</span><br></pre></td></tr></table></figure>
<h3 id="4-4-yarn-常用命令">4.4 yarn 常用命令</h3>
<table>
<thead>
<tr>
<th>功能</th>
<th>命令</th>
</tr>
</thead>
<tbody>
<tr>
<td>初始化</td>
<td><code>yarn init</code> / <code>yarn init -y</code></td>
</tr>
<tr>
<td>安装包</td>
<td><code>yarn add uniq</code>（生产依赖）<code>yarn add less --dev</code>（开发依赖）<code>yarn global add nodemon</code>（全局安装）</td>
</tr>
<tr>
<td>删除包</td>
<td><code>yarn remove uniq</code>（删除项目依赖包）<code>yarn global remove nodemon</code>（全局删除包）</td>
</tr>
<tr>
<td>安装项目依赖</td>
<td><code>yarn</code></td>
</tr>
<tr>
<td>运行命令别名</td>
<td><code>yarn &lt;别名&gt;</code>（不需要添加 <code>run</code>）</td>
</tr>
</tbody>
</table>
<h3 id="4-5-yarn-配置淘宝镜像">4.5 yarn 配置淘宝镜像</h3>
<p>可以通过如下命令配置淘宝镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn config <span class="built_in">set</span> registry https://registry.npmmirror.com/</span><br></pre></td></tr></table></figure>
<p>可以通过 <code>yarn config list</code> 查看 yarn 的配置项</p>
<h3 id="4-6-npm-和-yarn-选择">4.6 npm 和 yarn 选择</h3>
<p>大家可以根据不同的场景进行选择：</p>
<ol>
<li><strong>个人项目</strong> 如果是个人项目，哪个工具都可以，可以根据自己的喜好来选择。</li>
<li><strong>公司项目</strong> 如果是公司项目要根据项目代码来选择，可以通过锁文件判断项目的包管理工具：
<ul>
<li><code>npm</code> 的锁文件为 <code>package-lock.json</code></li>
<li><code>yarn</code> 的锁文件为 <code>yarn.lock</code></li>
</ul>
</li>
</ol>
<p><strong>包管理工具不要混用，切记，切记，切记</strong></p>
<h3 id="五、管理发布包">五、管理发布包</h3>
<h4 id="5-1-创建与发布">5.1 创建与发布</h4>
<p>我们可以将自己开发的工具包发布到 npm 服务上，方便自己和其他开发者使用，操作步骤如下：</p>
<ol>
<li>创建文件夹，并创建文件 <code>index.js</code>，在文件中声明函数，使用 <code>module.exports</code> 暴露。</li>
<li>npm 初始化工具包，<code>package.json</code> 填写包的信息（包的名字是唯一的）。</li>
<li>注册账号 <a target="_blank" rel="noopener" href="https://www.npmjs.com/signup%E3%80%82">https://www.npmjs.com/signup。</a></li>
<li>激活账号（一定要激活账号）。</li>
<li>修改为官方的官方镜像（命令行中运行 <code>nrm use npm</code>）。</li>
<li>命令行下 <code>npm login</code> 填写相关用户信息。</li>
<li>命令行下 <code>npm publish</code> 提交包。</li>
</ol>
<h4 id="5-2-更新包">5.2 更新包</h4>
<p>后续可以对自己发布的包进行更新，操作步骤如下：</p>
<ol>
<li>更新包中的代码。</li>
<li>测试代码是否可用。</li>
<li>修改 <code>package.json</code> 中的版本号。</li>
<li>发布更新。<code>npm publish</code>。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure>
<h3 id="六、扩展内容">六、扩展内容</h3>
<p>在很多语言中都有包管理工具，比如：</p>
<table>
<thead>
<tr>
<th>语言</th>
<th>包管理工具</th>
</tr>
</thead>
<tbody>
<tr>
<td>PHP</td>
<td>composer</td>
</tr>
<tr>
<td>Python</td>
<td>pip</td>
</tr>
<tr>
<td>Java</td>
<td>maven</td>
</tr>
<tr>
<td>Go</td>
<td>go mod</td>
</tr>
<tr>
<td>JavaScript</td>
<td>npm / yarn / cnpm / other</td>
</tr>
<tr>
<td>Ruby</td>
<td>rubyGems</td>
</tr>
</tbody>
</table>
<p>除了编程语言领域有包管理工具之外，操作系统层面也存在包管理工具，不过这个包指的是【软件包】</p>
<table>
<thead>
<tr>
<th>操作系统</th>
<th>包管理工具</th>
<th>网址</th>
</tr>
</thead>
<tbody>
<tr>
<td>Centos</td>
<td>yum</td>
<td><a target="_blank" rel="noopener" href="https://packages.debian.org/stable/">https://packages.debian.org/stable/</a></td>
</tr>
<tr>
<td>Ubuntu</td>
<td>apt</td>
<td><a target="_blank" rel="noopener" href="https://packages.ubuntu.com/">https://packages.ubuntu.com/</a></td>
</tr>
<tr>
<td>MacOS</td>
<td>homebrew</td>
<td><a target="_blank" rel="noopener" href="https://brew.sh/">https://brew.sh/</a></td>
</tr>
<tr>
<td>Windows</td>
<td>chocolatey</td>
<td><a target="_blank" rel="noopener" href="https://chocolatey.org/">https://chocolatey.org/</a></td>
</tr>
</tbody>
</table>
<h2 id="nvm">nvm</h2>
<h3 id="一、介绍-2">一、介绍</h3>
<p>nvm 全称 <code>Node Version Manager</code>，顾名思义它是用来管理 node 版本的工具，方便切换不同版本的 Node.js</p>
<h3 id="二、使用">二、使用</h3>
<p>nvm 的使用非常的简单，跟 npm 的使用方法类似</p>
<h4 id="2-1-下载安装">2.1 下载安装</h4>
<p>首先先下载 nvm，下载地址 <a target="_blank" rel="noopener" href="https://github.com/coreybutler/nvm-windows/releases">https://github.com/coreybutler/nvm-windows/releases</a> ，选择 <code>nvm-setup.exe</code> 下载即可</p>
<h4 id="2-2-常用命令">2.2 常用命令</h4>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nvm list available</code></td>
<td>显示所有可以下载的 Node.js 版本</td>
</tr>
<tr>
<td><code>nvm list</code></td>
<td>显示已安装的版本</td>
</tr>
<tr>
<td><code>nvm install 18.12.1</code></td>
<td>安装 18.12.1 版本的 Node.js</td>
</tr>
<tr>
<td><code>nvm install latest</code></td>
<td>安装最新版的 Node.js</td>
</tr>
<tr>
<td><code>nvm uninstall 18.12.1</code></td>
<td>删除某个版本的 Node.js</td>
</tr>
<tr>
<td><code>nvm use 18.12.1</code></td>
<td>切换 18.12.1 的 Node.js</td>
</tr>
</tbody>
</table>
<h2 id="ExpressJS">ExpressJS</h2>
<h3 id="一、express-介绍">一、express 介绍</h3>
<p>express 是一个基于 Node.js 平台的极简、灵活的 WEB 应用开发框架，官方网址：<a target="_blank" rel="noopener" href="https://www.expressjs.com.cn/">https://www.expressjs.com.cn/</a></p>
<p>简单来说，express 是一个封装好的工具包，封装了很多功能，便于我们开发 WEB 应用（HTTP 服务）</p>
<h3 id="二、express-使用">二、express 使用</h3>
<h4 id="2-1-express-下载">2.1 express 下载</h4>
<p>express 本身是一个 npm 包，所以可以通过 npm 安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br><span class="line">npm i express</span><br></pre></td></tr></table></figure>
<h4 id="2-2-express-初体验">2.2 express 初体验</h4>
<p>大家可以按照这个步骤进行操作：</p>
<ol>
<li>创建 JS 文件，键入如下代码</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 导入 express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 创建应用对象</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 创建路由规则</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/home&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">end</span>(<span class="string">&#x27;hello express server&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 监听端口 启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动, 端口监听为 3000...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>命令行下执行：</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">node</span> <span class="title">&lt;文件名&gt;</span></span><br><span class="line"><span class="title"># 或者</span></span><br><span class="line"><span class="title">nodemon</span> <span class="tag">&lt;文件名&gt;</span></span><br></pre></td></tr></table></figure>
<p>访问 <code>http://127.0.0.1:3000/home</code> 可查看结果。</p>
<h3 id="三、express-路由">三、express 路由</h3>
<h4 id="3-1-什么是路由">3.1 什么是路由</h4>
<p>官方定义：路由确定了应用程序如何响应客户端对特定端点的请求。</p>
<h4 id="3-2-路由的使用">3.2 路由的使用</h4>
<p>一个路由的组成有<code>请求方法</code>，<code>路径</code>和<code>回调函数</code>组成。</p>
<p>express 中提供了一系列方法，可以很方便的使用路由，使用格式如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.&lt;method&gt;(path, callback)</span><br></pre></td></tr></table></figure>
<p>代码示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入 express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建应用对象</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建 get 路由</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/home&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;网站首页&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//首页路由</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;我才是真正的首页&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建 post 路由</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;登录成功&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//匹配所有的请求方法</span></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;/search&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;1 秒钟为您找到相关结果约 100,000,000 个&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//自定义 404 路由</span></span><br><span class="line">app.<span class="title function_">all</span>(<span class="string">&#x27;*&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;&lt;h1&gt;404 Not Found&lt;/h1&gt;&#x27;</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口 启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务已经启动, 端口监听为 3000&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="3-3-获取请求参数">3.3 获取请求参数</h3>
<p>express 框架封装了一些 API 来方便获取请求报文中的数据，并且兼容原生 HTTP 模块的获取方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入 express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建应用对象</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取请求的路由规则</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/request&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//1. 获取报文的方式与原生 HTTP 获取方式是兼容的</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">method</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">url</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">httpVersion</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">headers</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//2. express 独有的获取报文的方式</span></span><br><span class="line">  <span class="comment">//获取查询字符串</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">query</span>); <span class="comment">// [相对重要]</span></span><br><span class="line">  <span class="comment">// 获取指定的请求头</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="title function_">get</span>(<span class="string">&#x27;host&#x27;</span>));</span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&#x27;请求报文的获取&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//启动服务</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;启动成功....&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="3-4-获取路由参数">3.4 获取路由参数</h3>
<p>路由参数指的是 URL 路径中的参数（数据）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/:id.html&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;商品详情，商品 id 为&#x27;</span> + req.<span class="property">params</span>.<span class="property">id</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="练习">练习</h3>
<hr>
<h3 id="根据路由参数响应歌手的信息">根据路由参数响应歌手的信息</h3>
<p>路径结构如下</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/singer/</span><span class="number">1</span>.html</span><br></pre></td></tr></table></figure>
<p>显示歌手的<code>姓名</code>和<code>图片</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;singers&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;singer_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;周杰伦&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;singer_pic&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://y.gtimg.cn/music/photo_new/T001R150x150M0000025NhlN2yWrP4.webp&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;other_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Jay Chou&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;singer_id&quot;</span><span class="punctuation">:</span> <span class="number">4558</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;singer_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;林俊杰&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;singer_pic&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://y.gtimg.cn/music/photo_new/T001R150x150M000001BLpXF2DyJe2.webp&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;other_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JJ Lin&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;singer_id&quot;</span><span class="punctuation">:</span> <span class="number">4286</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;singer_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;G.E.M. 邓紫棋&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;singer_pic&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://y.gtimg.cn/music/photo_new/T001R150x150M000001fNHEf1SFEFN.webp&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;other_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Gloria Tang&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;singer_id&quot;</span><span class="punctuation">:</span> <span class="number">13948</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">3</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;singer_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;薛之谦&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;singer_pic&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://y.gtimg.cn/music/photo_new/T001R150x150M000002J4UUk29y8BY.webp&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;other_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;singer_id&quot;</span><span class="punctuation">:</span> <span class="number">5062</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">4</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="四、express-响应设置">四、express 响应设置</h3>
<p>express 框架封装了一些 API 来方便给客户端响应数据，并且兼容原生 HTTP 模块的获取方式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取请求的路由规则</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/response&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//1. express 中设置响应的方式兼容 HTTP 模块的方式</span></span><br><span class="line">    res.<span class="property">statusCode</span> = <span class="number">404</span>;</span><br><span class="line">    res.<span class="property">statusMessage</span> = <span class="string">&#x27;xxx&#x27;</span>;</span><br><span class="line">    res.<span class="title function_">setHeader</span>(<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;xyz&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">write</span>(<span class="string">&#x27;响应体&#x27;</span>);</span><br><span class="line">    res.<span class="title function_">end</span>(<span class="string">&#x27;xxx&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. express 的响应方法</span></span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">500</span>); <span class="comment">//设置响应状态码</span></span><br><span class="line">    res.<span class="title function_">set</span>(<span class="string">&#x27;xxx&#x27;</span>, <span class="string">&#x27;yyy&#x27;</span>);<span class="comment">//设置响应头</span></span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;中文响应不乱码&#x27;</span>);<span class="comment">//设置响应体 send 不会乱码 会内置一个请求头</span></span><br><span class="line">    <span class="comment">//连贯操作</span></span><br><span class="line">    res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">set</span>(<span class="string">&#x27;xxx&#x27;</span>, <span class="string">&#x27;yyy&#x27;</span>).<span class="title function_">send</span>(<span class="string">&#x27;你好朋友&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. 其他响应</span></span><br><span class="line">    res.<span class="title function_">redirect</span>(<span class="string">&#x27;http://baidu.com&#x27;</span>);<span class="comment">//重定向</span></span><br><span class="line">    res.<span class="title function_">download</span>(<span class="string">&#x27;/package.json&#x27;</span>);<span class="comment">//下载响应</span></span><br><span class="line">    res.<span class="title function_">json</span>(&#123;&#125;);<span class="comment">//响应 JSON</span></span><br><span class="line">    res.<span class="title function_">sendFile</span>(__dirname + <span class="string">&#x27;/home.html&#x27;</span>) <span class="comment">//响应文件内容</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="五、express中间件">五、express中间件</h3>
<h2 id="5-1-什么是中间件">5.1 什么是中间件</h2>
<p>中间件（Middleware）本质是一个回调函数</p>
<p>中间件函数 可以像路由回调一样访问 请求对象（request），响应对象（response）</p>
<h2 id="5-2-中间件的作用">5.2 中间件的作用</h2>
<p>中间件的作用 就是 使用函数封装公共操作，简化代码</p>
<h2 id="5-3-中间件的类型">5.3 中间件的类型</h2>
<ul>
<li>全局中间件</li>
<li>路由中间件</li>
</ul>
<p>好比是我们去做高铁，我们都是先把行李过一次安检，我们就叫它安检门吧，这个安检门就是属于全局中间件，然后进入这个安检门以后会有很多通道我们需要刷卡进入 这就是路由中间件。</p>
<p>我们必须先检表再上高铁，不然就会产生很多混乱</p>
<h3 id="5-3-1-定义全局中间件">5.3.1 定义全局中间件</h3>
<p>每一个请求 到达服务端之后 都会执行全局中间件函数</p>
<p>声明中间件函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> recordMiddleware = <span class="keyword">function</span>(<span class="params">request, response, next</span>)&#123;</span><br><span class="line">    <span class="comment">//实现功能代码</span></span><br><span class="line">    <span class="comment">//.....</span></span><br><span class="line">    <span class="comment">//执行next函数(当如果希望执行完中间件函数之后，仍然继续执行路由中的回调函数，必须调用next)</span></span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="./nodejs(1).assets/image-20250610174956850.png" alt="image-20250610174956850"></p>
<p>应用中间件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(recordMiddleware);</span><br></pre></td></tr></table></figure>
<p>声明时可以直接将匿名函数传递给 <code>use</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">request, response, next</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;定义第一个中间件&#x27;</span>);</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="5-3-2-多个全局中间件">5.3.2 多个全局中间件</h2>
<p><code>express</code> 允许使用 <code>app.use()</code> 定义多个全局中间件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">request, response, next</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;定义第一个中间件&#x27;</span>);</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">request, response, next</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;定义第二个中间件&#x27;</span>);</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="5-3-3-定义路由中间件">5.3.3 定义路由中间件</h2>
<p>如果只需要对某一些路由进行功能封装，则就需要路由中间件</p>
<p>调用格式如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/路径&#x27;</span>, <span class="string">&#x27;中间件函数&#x27;</span>, <span class="function">(<span class="params">request, response</span>)=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/路径&#x27;</span>, <span class="string">&#x27;中间件函数1&#x27;</span>, <span class="string">&#x27;中间件函数2&#x27;</span>, <span class="function">(<span class="params">request, response</span>)=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="5-4-静态资源中间件">5.4 静态资源中间件</h3>
<p><code>express</code> 内置处理静态资源的中间件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入express框架</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="comment">//创建服务对象</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//静态资源中间件的设置，将当前文件夹下的public目录作为网站的根目录</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(<span class="string">&#x27;./public&#x27;</span>)); </span><br><span class="line"><span class="comment">//如果访问的内容经常变化，还是需要设置路由</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//但是，在这里有一个问题，如果public目录下有index.html文件，单独也有index.html的路由，</span></span><br><span class="line"><span class="comment">//则谁书写在前，优先执行谁</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/index.html&#x27;</span>,<span class="function">(<span class="params">request,response</span>)=&gt;</span>&#123;</span><br><span class="line">  response.<span class="title function_">send</span>(<span class="string">&#x27;首页&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听端口</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3000端口启动....&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="注意事项">注意事项:</h4>
<ol>
<li><code>index.html</code> 文件为默认打开的资源</li>
<li>如果静态资源与路由规则同时匹配，谁先匹配谁就响应</li>
<li>路由响应动态资源，静态资源中间件响应静态资源</li>
</ol>
<h3 id="5-5-获取请求体数据-body-parser">5.5 获取请求体数据 body - parser</h3>
<p><code>express</code> 可以使用 <code>body - parser</code> 包处理请求体</p>
<h4 id="第一步：安装">第一步：安装</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i body - parser</span><br></pre></td></tr></table></figure>
<h4 id="第二步：导入-body-parser-包">第二步：导入 body - parser 包</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body - parser&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h4 id="第三步：获取中间件函数">第三步：获取中间件函数</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 处理 querystring 格式的请求体</span></span><br><span class="line"><span class="keyword">let</span> urlParser = bodyParser.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;);</span><br><span class="line"><span class="comment">// 处理 JSON 格式的请求体</span></span><br><span class="line"><span class="keyword">let</span> jsonParser = bodyParser.<span class="title function_">json</span>();</span><br></pre></td></tr></table></figure>
<h4 id="第四步：设置路由中间件，然后使用-request-body-来获取请求体数据">第四步：设置路由中间件，然后使用 <code>request.body</code> 来获取请求体数据</h4>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, urlParser, <span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 获取请求体数据</span></span><br><span class="line">    <span class="comment">// console.log(request.body);</span></span><br><span class="line">    <span class="comment">// 用户名</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">body</span>.<span class="property">username</span>);</span><br><span class="line">    <span class="comment">// 密码</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(request.<span class="property">body</span>.<span class="property">userpass</span>);</span><br><span class="line">    response.<span class="title function_">send</span>(<span class="string">&#x27;获取请求体数据&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>获取到的请求体数据:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Object: null prototype] &#123; username: <span class="string">&#x27;admin&#x27;</span>, userpass: <span class="string">&#x27;123456&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="六、Router">六、Router</h3>
<h4 id="6-1-什么是-Router">6.1 什么是 Router</h4>
<p><code>express</code> 中的 <code>Router</code> 是一个完整的中间件和路由系统，可以看做是一个小型的 <code>app</code> 对象。</p>
<h4 id="6-2-Router-作用">6.2 Router 作用</h4>
<p>对路由进行模块化，更好的管理路由。</p>
<h4 id="6-3-Router-使用">6.3 Router 使用</h4>
<ul>
<li>创建独立的 <code>JS</code> 文件（<code>homeRouter.js</code>）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">t<span class="comment">//1. 导入 express</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 创建路由器对象</span></span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 在 router 对象身上添加路由</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;首页&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/cart&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;购物车&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 暴露</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router;</span><br></pre></td></tr></table></figure>
<ul>
<li>主文件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="comment">//5.引入子路由文件</span></span><br><span class="line"><span class="keyword">const</span> homeRouter = <span class="built_in">require</span>(<span class="string">&#x27;./routes/homeRouter&#x27;</span>);</span><br><span class="line"><span class="comment">//6.设置和使用中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(homeRouter);</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3000 端口启动....&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="七、EJS-模板引擎">七、EJS 模板引擎</h3>
<h2 id="7-1-什么是模板引擎">7.1 什么是模板引擎</h2>
<p>模板引擎是分离用户界面和业务数据的一种技术。</p>
<h2 id="7-2-什么是-EJS">7.2 什么是 EJS</h2>
<p>EJS 是一个高效的 Javascript 的模板引擎。</p>
<ul>
<li>官网: <a target="_blank" rel="noopener" href="https://ejs.co/">https://ejs.co/</a></li>
<li>中文站: <a target="_blank" rel="noopener" href="https://ejs.bootcss.com/">https://ejs.bootcss.com/</a></li>
</ul>
<h2 id="7-3-EJS-初体验">7.3 EJS 初体验</h2>
<h3 id="下载安装-EJS">下载安装 EJS</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i ejs --save</span><br></pre></td></tr></table></figure>
<h3 id="代码示例">代码示例</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.引入ejs</span></span><br><span class="line"><span class="keyword">const</span> ejs = <span class="built_in">require</span>(<span class="string">&#x27;ejs&#x27;</span>);</span><br><span class="line"><span class="comment">// 2.定义数据</span></span><br><span class="line"><span class="keyword">let</span> person = [<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;王二麻子&#x27;</span>];</span><br><span class="line"><span class="comment">// 3.ejs解析模板返回结构</span></span><br><span class="line"><span class="comment">// &lt;%%&gt; 是ejs解析内容的标记，作用是输出当前表达式的执行结构</span></span><br><span class="line"><span class="keyword">let</span> html = ejs.<span class="title function_">render</span>(<span class="string">&#x27;&lt;%= person.join(&quot;, &quot;) %&gt;&#x27;</span>, &#123;<span class="attr">person</span>:person&#125;);</span><br><span class="line"><span class="comment">// 4.输出结果</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(html);</span><br></pre></td></tr></table></figure>
<p>命令行下运行</p>
<h3 id="7-4-EJS常用语法">7.4 EJS常用语法</h3>
<h4 id="执行JS代码">执行JS代码</h4>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;% code %&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="输出转义的数据到模板上">输出转义的数据到模板上</h4>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= code %&gt;</span><br></pre></td></tr></table></figure>
<h4 id="输出非转义的数据到模板上">输出非转义的数据到模板上</h4>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%- code %&gt;</span><br></pre></td></tr></table></figure>
<h1>MongoDB</h1>
<h2 id="一、简介">一、简介</h2>
<h3 id="1-1-MongoDB是什么">1.1 MongoDB是什么</h3>
<p>MongoDB是一个基于分布式文件存储的数据库，官方地址 <a target="_blank" rel="noopener" href="https://www.mongodb.com/">https://www.mongodb.com/</a></p>
<h3 id="1-2-数据库是什么">1.2 数据库是什么</h3>
<p>数据库（DataBase）是按照数据结构来组织、存储和管理数据的&lt;应用程序&gt;</p>
<h3 id="1-3-数据库的作用">1.3 数据库的作用</h3>
<p>数据库的主要作用就是&lt;管理数据&gt;，对数据进行&lt;增（c）、删（d）、改（u）、查（r）&gt;</p>
<h3 id="1-4-数据库管理数据的特点">1.4 数据库管理数据的特点</h3>
<p>相比于纯文件管理数据，数据库管理数据有如下特点：</p>
<ol>
<li>速度更快</li>
<li>扩展性更强</li>
<li>安全性更强</li>
</ol>
<h3 id="1-5-为什么选择-MongoDB">1.5 为什么选择 MongoDB</h3>
<p>操作语法与 JavaScript 类似，容易上手，学习成本低</p>
<h2 id="二、核心概念">二、核心概念</h2>
<p>Mongodb中有三个重要概念需要掌握</p>
<ul>
<li>数据库（database）：数据库是一个数据仓库，数据库服务下可以创建很多数据库，数据库中可以存放很多集合</li>
<li>集合（collection）：集合类似于JS中的数组，在集合中可以存放很多文档</li>
<li>文档（document）：文档是数据库中的最小单位，类似于JS中的对象</li>
</ul>
<p><strong>大家可以通过 JSON 文件来理解 Mongodb 中的概念</strong></p>
<ul>
<li>一个 JSON 文件 好比是一个 数据库，一个 Mongodb 服务下可以有 N 个数据库</li>
<li>JSON 文件中的一级属性的数组值 好比是 集合</li>
<li>数组中的对象好比是 文档</li>
<li>对象中的属性有时也称之为 字段</li>
</ul>
<p><strong>一般情况下</strong></p>
<ul>
<li>一个项目使用一个数据库</li>
<li>一个集合会存储同一种类型的数据</li>
</ul>
<h2 id="三、下载安装与启动">三、下载安装与启动</h2>
<p>下载地址： <a target="_blank" rel="noopener" href="https://www.mongodb.com/try/download/community">https://www.mongodb.com/try/download/community</a> 建议选择 zip 类型，通用性更强</p>
<p>配置步骤如下：</p>
<p>1&gt; 将压缩包移动到 <code>C:\Program Files</code> 下，然后解压</p>
<p>2&gt; 创建 <code>C:\data\db</code> 目录，mongodb 会将数据默认保存在这个文件夹</p>
<p>3&gt; 以 mongodb 中 <code>bin</code> 目录作为工作目录，启动命令行</p>
<p>4&gt; 运行命令 <code>mongod</code></p>
<h1>会话控制</h1>
<h2 id="一、介绍-3">一、介绍</h2>
<p>所谓会话控制就是 <strong>对会话进行控制</strong></p>
<p>HTTP 是一种无状态的协议，它没有办法区分多次的请求是否来自于同一个客户端， <strong>无法区分用户</strong></p>
<p>而产品中又大量存在的这样的需求， 所以我们需要通过 <strong>会话控制</strong> 来解决该问题</p>
<p>常见的会话控制技术有三种：</p>
<ul>
<li>cookie</li>
<li>session</li>
<li>token</li>
</ul>
<h2 id="二、cookie">二、cookie</h2>
<h3 id="2-1-cookie-是什么">2.1 cookie 是什么</h3>
<p>cookie 是 HTTP 服务器发送到用户浏览器并保存在本地的一小块数据</p>
<p><strong>cookie 是保存在浏览器端的一小块数据</strong></p>
<p><strong>cookie 是按照域名划分保存的</strong></p>
<p>简单示例：</p>
<table>
<thead>
<tr>
<th>域名</th>
<th>cookie</th>
</tr>
</thead>
<tbody>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.baidu.com/">https://www.baidu.com</a></td>
<td>a=100; b=200</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://www.bilibili.com/">https://www.bilibili.com</a></td>
<td>xid=1020abce121; hm=112411213</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://jd.com">jd.com</a></td>
<td>x=100; ocw=12414cce</td>
</tr>
</tbody>
</table>
<h3 id="2-2-cookie-的特点">2.2 cookie 的特点</h3>
<p>浏览器向服务器发送请求时，会自动将 当前域名下 可用的 cookie 设置在请求头中，然后传递给服务器</p>
<p>这个请求头的名字也叫 cookie ，所以将 cookie 理解为一个 HTTP 的请求头也是可以的 2.3 cookie 的运行流程 填写账号和密码校验身份，校验通过后下发 cookie</p>
<p><img src="./nodejs(1).assets/image-20250610180549565.png" alt="image-20250610180549565"></p>
<p>有了 cookie 之后，后续向服务器发送请求时，就会自动携带 cookie</p>
<p><img src="./nodejs(1).assets/image-20250610180611114.png" alt="image-20250610180611114"></p>
<h2 id="三、Session">三、Session</h2>
<h3 id="3-1-Session-是什么">3.1 Session 是什么</h3>
<p>Session 是保存在服务器端的一块儿数据，保存当前访问用户的相关信息。</p>
<h3 id="3-2-Session-的作用">3.2 Session 的作用</h3>
<p>实现会话控制，可以识别用户的身份，快速获取当前用户的相关信息。</p>
<h3 id="3-3-Session-运行流程">3.3 Session 运行流程</h3>
<ol>
<li>用户填写账号和密码校验身份，校验通过后创建 <code>session</code> 信息。</li>
<li>服务器将 <code>session_id</code> 的值通过响应头返回给浏览器。</li>
<li>当浏览器再次发送请求时，会将 <code>session_id</code> 携带在请求头中。</li>
<li>服务器接收到请求后，根据 <code>session_id</code> 找到对应的 <code>session</code> 信息，从而知道当前用户的身份等相关信息。</li>
</ol>
<p><img src="./nodejs(1).assets/image-20250610180718738.png" alt="image-20250610180718738"></p>
<p>有了 cookie，下次发送请求时会自动携带 cookie，服务器通过 cookie 中的 session_id 的值确定用 户的身份</p>
<p><img src="./nodejs(1).assets/image-20250610180739400.png" alt="image-20250610180739400"></p>
<p>类似比喻：好比去理发店，一般会有会员说是如果不充值35 充值25且这一次免费，充值玩后它会给你一张卡，然后他会再它的笔记本上记录信息 以后要剪头发只要去笔记本里看看有没有你的信息即可。</p>
<h1>四、session 和 cookie 的区别</h1>
<p>cookie 和 session 的区别主要有如下几点：</p>
<h2 id="1-存在的位置">1. 存在的位置</h2>
<ul>
<li>cookie：浏览器端</li>
<li>session：服务端</li>
</ul>
<h2 id="2-安全性">2. 安全性</h2>
<ul>
<li>cookie 是以明文的方式存放在客户端的，安全性相对较低</li>
<li>session 存放于服务器中，所以安全性相对较好</li>
</ul>
<h2 id="3-网络传输量">3. 网络传输量</h2>
<ul>
<li>cookie 设置内容过多会增大报文体积，会影响传输效率</li>
<li>session 数据存储在服务器，只是通过 cookie 传递 id，所以不影响传输效率</li>
</ul>
<h2 id="4-存储限制">4. 存储限制</h2>
<ul>
<li>浏览器限制单个 cookie 保存的数据不能超过 4K，且单个域名下的存储数量也有限制</li>
<li>session 数据存储在服务器中，所以没有这些限制</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>Nodejs</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://yjyrichard.github.io/posts/33b4e017.html">https://yjyrichard.github.io/posts/33b4e017.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>Yangjiayu</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2025-07-31</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2025-08-01</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/nodejs/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>nodejs</a></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">投喂作者</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://bilibili123.oss-cn-beijing.aliyuncs.com/about/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98.jpg" target="_blank"><img class="post-qr-code-img" src="https://bilibili123.oss-cn-beijing.aliyuncs.com/about/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://bilibili123.oss-cn-beijing.aliyuncs.com/about/%E6%94%AF%E4%BB%98%E5%AE%9D.jpg" target="_blank"><img class="post-qr-code-img" src="https://bilibili123.oss-cn-beijing.aliyuncs.com/about/%E6%94%AF%E4%BB%98%E5%AE%9D.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></button></div><audio id="coinAudio" src="https://npm.elemecdn.com/akilar-candyassets@1.0.36/audio/aowu.m4a"></audio><script defer="defer" src="/js/coin.js"></script><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/9a7f448e.html"><img class="prev-cover" src="https://bilibili123.oss-cn-beijing.aliyuncs.com/websitepic/10.png" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Jenkins</div></div></a></div><div class="next-post pull-right"><a href="/posts/47f8bb74.html"><img class="next-cover" src="https://bilibili123.oss-cn-beijing.aliyuncs.com/websitepic/2.png" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">numpy与pandas</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:bold">目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AD%A6%E4%B9%A0Node-js"><span class="toc-text">为什么学习Node.js?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Node-js%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-text">Node.js是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Node-js-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">Node.js 的作用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BC%80%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BA%94%E7%94%A8"><span class="toc-text">1.开发服务器应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%BA%94%E7%94%A8"><span class="toc-text">2.开发工具类应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%BC%80%E5%8F%91%E6%A1%8C%E9%9D%A2%E7%AB%AF%E5%BA%94%E7%94%A8"><span class="toc-text">3.开发桌面端应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Node-js-%E4%B8%8B%E8%BD%BD%E5%92%8C%E5%AE%89%E8%A3%85"><span class="toc-text">Node.js 下载和安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Node-js-%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="toc-text">Node.js 初体验</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Node-js%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-text">Node.js注意点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Buffer"><span class="toc-text">Buffer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="toc-text">计算机基本组成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-text">程序运行的基本流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B"><span class="toc-text">进程和线程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fs%E6%A8%A1%E5%9D%97"><span class="toc-text">fs模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-writeFile%E5%BC%82%E6%AD%A5%E5%86%99%E5%85%A5"><span class="toc-text">1 - 1. writeFile异步写入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fs%E5%BC%82%E6%AD%A5%E4%B8%8E%E5%90%8C%E6%AD%A5"><span class="toc-text">fs异步与同步</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-writeFileSync-%E5%90%8C%E6%AD%A5%E5%86%99%E5%85%A5"><span class="toc-text">1 - 2. writeFileSync 同步写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-appendFile-appendFileSync-%E8%BF%BD%E5%8A%A0%E5%86%99%E5%85%A5"><span class="toc-text">1 - 3. appendFile &#x2F; appendFileSync 追加写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-createWriteStream-%E6%B5%81%E5%BC%8F%E5%86%99%E5%85%A5"><span class="toc-text">1 - 4. createWriteStream 流式写入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-text">1 - 5. 写入文件的场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"><span class="toc-text">二、文件读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-readFile-%E5%BC%82%E6%AD%A5%E8%AF%BB%E5%8F%96"><span class="toc-text">2 - 1. readFile 异步读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-readFileSync-%E5%90%8C%E6%AD%A5%E8%AF%BB%E5%8F%96"><span class="toc-text">2 - 2. readFileSync 同步读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-createReadStream-%E6%B5%81%E5%BC%8F%E8%AF%BB%E5%8F%96"><span class="toc-text">2 - 3. createReadStream 流式读取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">2 - 4读取文件应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%96%87%E4%BB%B6%E7%A7%BB%E5%8A%A8%E4%B8%8E%E9%87%8D%E5%91%BD%E5%90%8D"><span class="toc-text">三、文件移动与重命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B%EF%BC%9A"><span class="toc-text">代码示例：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%96%87%E4%BB%B6%E5%88%A0%E9%99%A4"><span class="toc-text">四、文件删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%96%87%E4%BB%B6%E5%A4%B9%E6%93%8D%E4%BD%9C"><span class="toc-text">五、文件夹操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-mkdir-%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-text">5 - 1 mkdir 创建文件夹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-readdir-%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-text">5 - 2 readdir 读取文件夹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-text">语法:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="toc-text">参数说明:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">示例代码:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-rndir-%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-text">5 - 3 rndir 删除文件夹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-2"><span class="toc-text">语法:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E-2"><span class="toc-text">参数说明:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-2"><span class="toc-text">示例代码:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-text">注意:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%9F%A5%E7%9C%8B%E8%B5%84%E6%BA%90%E7%8A%B6%E6%80%81"><span class="toc-text">六、查看资源状态</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-text">语法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E%EF%BC%9A"><span class="toc-text">参数说明：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="toc-text">示例代码：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E%EF%BC%9A"><span class="toc-text">说明：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%93%E6%9E%9C%E5%80%BC%E5%AF%B9%E8%B1%A1%E7%BB%93%E6%9E%84%EF%BC%9A"><span class="toc-text">结果值对象结构：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-text">七、相对路径问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AB%E3%80%81-dirname"><span class="toc-text">八、__dirname</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B%EF%BC%9A-2"><span class="toc-text">代码示例：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0%EF%BC%9A%E6%89%B9%E9%87%8F%E9%87%8D%E5%91%BD%E5%90%8D"><span class="toc-text">练习：批量重命名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#path-%E6%A8%A1%E5%9D%97"><span class="toc-text">path 模块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B%EF%BC%9A-3"><span class="toc-text">代码示例：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTPS%E5%8D%8F%E8%AE%AE"><span class="toc-text">HTTPS协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A6%82%E5%BF%B5"><span class="toc-text">一、概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-text">二、请求报文的组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81HTTP-%E7%9A%84%E8%AF%B7%E6%B1%82%E8%A1%8C"><span class="toc-text">三、HTTP 的请求行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81HTTP-%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-text">四、HTTP 请求头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81HTTP-%E7%9A%84%E8%AF%B7%E6%B1%82%E4%BD%93"><span class="toc-text">五、HTTP 的请求体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-text">六、响应报文的组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%88%9B%E5%BB%BA-HTTP-%E6%9C%8D%E5%8A%A1"><span class="toc-text">七、创建 HTTP 服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4"><span class="toc-text">7.1 操作步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2%E6%B5%8B%E8%AF%95"><span class="toc-text">7.2测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">7.3注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP%E5%8D%8F%E8%AE%AE%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3"><span class="toc-text">HTTP协议默认端口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%8D%A0%E7%94%A8%E5%A4%84%E7%90%86"><span class="toc-text">端口被占用处理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9F%A5%E7%9C%8BHTTP%E6%8A%A5%E6%96%87"><span class="toc-text">八、浏览器查看HTTP报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E8%8E%B7%E5%8F%96HTTP%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-text">九、获取HTTP请求报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%EF%BC%9A"><span class="toc-text">注意事项：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E8%AE%BE%E7%BD%AE-HTTP-%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="toc-text">十、设置 HTTP 响应报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#write-%E5%92%8C-end-%E7%9A%84%E4%B8%A4%E7%A7%8D%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5%EF%BC%9A"><span class="toc-text">write 和 end 的两种使用情况：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-write-%E5%92%8C-end-%E7%9A%84%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8%EF%BC%88%E5%93%8D%E5%BA%94%E4%BD%93%E7%9B%B8%E5%AF%B9%E5%88%86%E6%95%A3%EF%BC%89"><span class="toc-text">1. write 和 end 的结合使用（响应体相对分散）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%8D%95%E7%8B%AC%E4%BD%BF%E7%94%A8-end-%E6%96%B9%E6%B3%95%EF%BC%88%E5%93%8D%E5%BA%94%E4%BD%93%E7%9B%B8%E5%AF%B9%E9%9B%86%E4%B8%AD%EF%BC%89"><span class="toc-text">2. 单独使用 end 方法（响应体相对集中）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E7%BB%83%E4%B9%A0"><span class="toc-text">10.1 练习</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81%E8%A7%A3%E9%87%8A%EF%BC%9A"><span class="toc-text">核心代码解释：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA%E6%A0%B8%E5%BF%83%E9%80%BB%E8%BE%91%EF%BC%9A"><span class="toc-text">HTTP 服务搭建核心逻辑：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E7%BD%91%E9%A1%B5%E8%B5%84%E6%BA%90%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B"><span class="toc-text">十一、网页资源的基本加载过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1"><span class="toc-text">十二、静态资源服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1%E7%BD%91%E7%AB%99%E6%A0%B9%E7%9B%AE%E5%BD%95%E6%88%96%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E7%9B%AE%E5%BD%95"><span class="toc-text">**12.1网站根目录或静态资源目录 **</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-%E7%BD%91%E9%A1%B5%E4%B8%AD%E7%9A%84-URL"><span class="toc-text">12.2 网页中的 URL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#12-2-1-%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-text">12.2.1 绝对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-2-2-%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-text">12.2.2 相对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-2-3-%E7%BD%91%E9%A1%B5%E4%B8%AD%E4%BD%BF%E7%94%A8-URL-%E7%9A%84%E5%9C%BA%E6%99%AF%E5%B0%8F%E7%BB%93"><span class="toc-text">12.2.3 网页中使用 URL 的场景小结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-3-%E8%AE%BE%E7%BD%AE%E8%B5%84%E6%BA%90%E7%B1%BB%E5%9E%8B%EF%BC%88mime%E7%B1%BB%E5%9E%8B%EF%BC%89"><span class="toc-text">12.3 设置资源类型（mime类型）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B9%E8%BF%9B-HTTP-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BB%A3%E7%A0%81%EF%BC%88%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E5%B0%81%E8%A3%85%EF%BC%89"><span class="toc-text">改进 HTTP 服务器代码（文件路径封装）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-4-GET-%E5%92%8C-POST-%E8%AF%B7%E6%B1%82%E5%9C%BA%E6%99%AF%E5%B0%8F%E7%BB%93"><span class="toc-text">12.4 GET 和 POST 请求场景小结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GET-%E8%AF%B7%E6%B1%82%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%9A"><span class="toc-text">GET 请求的情况：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#POST-%E8%AF%B7%E6%B1%82%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%9A"><span class="toc-text">POST 请求的情况：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81GET-%E5%92%8C-POST-%E8%AF%B7%E6%B1%82%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">十三、GET 和 POST 请求的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Node-js-%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-text">Node.js 模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%8B%E7%BB%8D"><span class="toc-text">一、介绍</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%A8%A1%E5%9D%97%E6%9A%B4%E9%9C%B2%E6%95%B0%E6%8D%AE"><span class="toc-text">二、模块暴露数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E6%A8%A1%E5%9D%97%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="toc-text">2.1 模块初体验</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%9A%B4%E9%9C%B2%E6%95%B0%E6%8D%AE"><span class="toc-text">2.2 暴露数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%AF%BC%E5%85%A5%EF%BC%88%E5%BC%95%E5%85%A5%EF%BC%89%E6%A8%A1%E5%9D%97"><span class="toc-text">三、导入（引入）模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-text">四、导入模块的基本流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81CommonJS-%E8%A7%84%E8%8C%83"><span class="toc-text">五、CommonJS 规范</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-text">包管理工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D"><span class="toc-text">一、概念介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%8C%85%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">1.1 包是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-text">1.2 包管理工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-text">1.3 常用的包管理工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81npm"><span class="toc-text">二、npm</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-npm-%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">2.1 npm 的安装</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-npm-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">2.2 npm 基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">2.2.1 初始化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9A%84%E8%BF%87%E7%A8%8B%E4%B8%AD%E8%BF%98%E6%9C%89%E4%B8%80%E4%BA%9B%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%EF%BC%9A"><span class="toc-text">初始化的过程中还有一些注意事项：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E6%90%9C%E7%B4%A2%E5%8C%85"><span class="toc-text">2.2.2 搜索包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85"><span class="toc-text">2.2.3 下载安装包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-4-require-%E5%AF%BC%E5%85%A5-npm-%E5%8C%85%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-text">2.2.4 require 导入 npm 包基本流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E4%B8%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-text">2.3 生产环境与开发环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E7%94%9F%E4%BA%A7%E4%BE%9D%E8%B5%96%E4%B8%8E%E5%BC%80%E5%8F%91%E4%BE%9D%E8%B5%96"><span class="toc-text">2.4 生产依赖与开发依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E5%85%A8%E5%B1%80%E5%AE%89%E8%A3%85"><span class="toc-text">2.5 全局安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-%E4%BF%AE%E6%94%B9-Windows-%E6%89%A7%E8%A1%8C%E7%AD%96%E7%95%A5"><span class="toc-text">2.5.1 修改 Windows 执行策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-Path"><span class="toc-text">2.5.2 环境变量 Path</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E"><span class="toc-text">补充说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E5%AE%89%E8%A3%85%E5%8C%85%E4%BE%9D%E8%B5%96"><span class="toc-text">2.6 安装包依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-%E5%AE%89%E8%A3%85%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%AC%E7%9A%84%E5%8C%85"><span class="toc-text">2.7 安装指定版本的包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F"><span class="toc-text">格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-text">示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-%E5%88%A0%E9%99%A4%E4%BE%9D%E8%B5%96"><span class="toc-text">2.8 删除依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9-%E9%85%8D%E7%BD%AE%E5%91%BD%E4%BB%A4%E5%88%AB%E5%90%8D"><span class="toc-text">2.9 配置命令别名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E%EF%BC%9A"><span class="toc-text">补充说明：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81cnpm"><span class="toc-text">三、cnpm</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E4%BB%8B%E7%BB%8D"><span class="toc-text">3.1 介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E5%AE%89%E8%A3%85"><span class="toc-text">3.2 安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4"><span class="toc-text">3.3 操作命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-npm-%E9%85%8D%E7%BD%AE%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F"><span class="toc-text">3.4 npm 配置淘宝镜像</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1-%E7%9B%B4%E6%8E%A5%E9%85%8D%E7%BD%AE"><span class="toc-text">3.4.1 直接配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-2-%E5%B7%A5%E5%85%B7%E9%85%8D%E7%BD%AE%EF%BC%88%E7%A4%BA%E4%BE%8B%E4%BD%BF%E7%94%A8-nrm-%E5%B7%A5%E5%85%B7%EF%BC%89"><span class="toc-text">3.4.2 工具配置（示例使用 nrm 工具）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E-2"><span class="toc-text">补充说明:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81yarn"><span class="toc-text">四、yarn</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-yarn-%E4%BB%8B%E7%BB%8D"><span class="toc-text">4.1 yarn 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-yarn-%E7%89%B9%E7%82%B9"><span class="toc-text">4.2 yarn 特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-yarn-%E5%AE%89%E8%A3%85"><span class="toc-text">4.3 yarn 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-yarn-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">4.4 yarn 常用命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-yarn-%E9%85%8D%E7%BD%AE%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F"><span class="toc-text">4.5 yarn 配置淘宝镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-npm-%E5%92%8C-yarn-%E9%80%89%E6%8B%A9"><span class="toc-text">4.6 npm 和 yarn 选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E7%AE%A1%E7%90%86%E5%8F%91%E5%B8%83%E5%8C%85"><span class="toc-text">五、管理发布包</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E5%88%9B%E5%BB%BA%E4%B8%8E%E5%8F%91%E5%B8%83"><span class="toc-text">5.1 创建与发布</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E6%9B%B4%E6%96%B0%E5%8C%85"><span class="toc-text">5.2 更新包</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%89%A9%E5%B1%95%E5%86%85%E5%AE%B9"><span class="toc-text">六、扩展内容</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nvm"><span class="toc-text">nvm</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%8B%E7%BB%8D-2"><span class="toc-text">一、介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8"><span class="toc-text">二、使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85"><span class="toc-text">2.1 下载安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">2.2 常用命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ExpressJS"><span class="toc-text">ExpressJS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81express-%E4%BB%8B%E7%BB%8D"><span class="toc-text">一、express 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81express-%E4%BD%BF%E7%94%A8"><span class="toc-text">二、express 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-express-%E4%B8%8B%E8%BD%BD"><span class="toc-text">2.1 express 下载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-express-%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="toc-text">2.2 express 初体验</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81express-%E8%B7%AF%E7%94%B1"><span class="toc-text">三、express 路由</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E4%BB%80%E4%B9%88%E6%98%AF%E8%B7%AF%E7%94%B1"><span class="toc-text">3.1 什么是路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E8%B7%AF%E7%94%B1%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">3.2 路由的使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-text">3.3 获取请求参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E8%8E%B7%E5%8F%96%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0"><span class="toc-text">3.4 获取路由参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-text">练习</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0%E5%93%8D%E5%BA%94%E6%AD%8C%E6%89%8B%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-text">根据路由参数响应歌手的信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81express-%E5%93%8D%E5%BA%94%E8%AE%BE%E7%BD%AE"><span class="toc-text">四、express 响应设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81express%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">五、express中间件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">5.1 什么是中间件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">5.2 中间件的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E4%B8%AD%E9%97%B4%E4%BB%B6%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">5.3 中间件的类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-1-%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">5.3.1 定义全局中间件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-2-%E5%A4%9A%E4%B8%AA%E5%85%A8%E5%B1%80%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">5.3.2 多个全局中间件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-3-%E5%AE%9A%E4%B9%89%E8%B7%AF%E7%94%B1%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">5.3.3 定义路由中间件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">5.4 静态资源中间件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">注意事项:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E4%BD%93%E6%95%B0%E6%8D%AE-body-parser"><span class="toc-text">5.5 获取请求体数据 body - parser</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%AE%89%E8%A3%85"><span class="toc-text">第一步：安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E5%AF%BC%E5%85%A5-body-parser-%E5%8C%85"><span class="toc-text">第二步：导入 body - parser 包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%87%BD%E6%95%B0"><span class="toc-text">第三步：获取中间件函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E8%AE%BE%E7%BD%AE%E8%B7%AF%E7%94%B1%E4%B8%AD%E9%97%B4%E4%BB%B6%EF%BC%8C%E7%84%B6%E5%90%8E%E4%BD%BF%E7%94%A8-request-body-%E6%9D%A5%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E4%BD%93%E6%95%B0%E6%8D%AE"><span class="toc-text">第四步：设置路由中间件，然后使用 request.body 来获取请求体数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E3%80%81Router"><span class="toc-text">六、Router</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E4%BB%80%E4%B9%88%E6%98%AF-Router"><span class="toc-text">6.1 什么是 Router</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-Router-%E4%BD%9C%E7%94%A8"><span class="toc-text">6.2 Router 作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-Router-%E4%BD%BF%E7%94%A8"><span class="toc-text">6.3 Router 使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83%E3%80%81EJS-%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-text">七、EJS 模板引擎</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E4%BB%80%E4%B9%88%E6%98%AF%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-text">7.1 什么是模板引擎</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E4%BB%80%E4%B9%88%E6%98%AF-EJS"><span class="toc-text">7.2 什么是 EJS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-EJS-%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="toc-text">7.3 EJS 初体验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85-EJS"><span class="toc-text">下载安装 EJS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B"><span class="toc-text">代码示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-EJS%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95"><span class="toc-text">7.4 EJS常用语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A7%E8%A1%8CJS%E4%BB%A3%E7%A0%81"><span class="toc-text">执行JS代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E8%BD%AC%E4%B9%89%E7%9A%84%E6%95%B0%E6%8D%AE%E5%88%B0%E6%A8%A1%E6%9D%BF%E4%B8%8A"><span class="toc-text">输出转义的数据到模板上</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E9%9D%9E%E8%BD%AC%E4%B9%89%E7%9A%84%E6%95%B0%E6%8D%AE%E5%88%B0%E6%A8%A1%E6%9D%BF%E4%B8%8A"><span class="toc-text">输出非转义的数据到模板上</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">MongoDB</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%AE%80%E4%BB%8B"><span class="toc-text">一、简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-MongoDB%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">1.1 MongoDB是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">1.2 数据库是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">1.3 数据库的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-text">1.4 数据库管理数据的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-MongoDB"><span class="toc-text">1.5 为什么选择 MongoDB</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">二、核心概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E4%B8%8E%E5%90%AF%E5%8A%A8"><span class="toc-text">三、下载安装与启动</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">会话控制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BB%8B%E7%BB%8D-3"><span class="toc-text">一、介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81cookie"><span class="toc-text">二、cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-cookie-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">2.1 cookie 是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-cookie-%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-text">2.2 cookie 的特点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81Session"><span class="toc-text">三、Session</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-Session-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">3.1 Session 是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-Session-%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">3.2 Session 的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-Session-%E8%BF%90%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">3.3 Session 运行流程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">四、session 和 cookie 的区别</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AD%98%E5%9C%A8%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-text">1. 存在的位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%AE%89%E5%85%A8%E6%80%A7"><span class="toc-text">2. 安全性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E9%87%8F"><span class="toc-text">3. 网络传输量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%AD%98%E5%82%A8%E9%99%90%E5%88%B6"><span class="toc-text">4. 存储限制</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background-color: transparent;"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">格言🧬</p><div class="bg-ad"><div>再看看那个光点，它就在这里，这是家园，这是我们 —— 你所爱的每一个人，你认识的一个人，你听说过的每一个人，曾经有过的每一个人，都在它上面度过他们的一生✨</div><div class="btn-xz-box"><a class="btn-xz" href="#">点击开启星辰之旅</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">猜你想看💡</p><ul class="ft-links"><li><a href="/social/link/">我的朋友</a><a href="/comments/">留点什么</a></li><li><a href="/personal/about/">关于作者</a><a href="/archives/">文章归档</a></li><li><a href="/categories/">文章分类</a><a href="/tags/">文章标签</a></li><li><a href="/box/Gallery/">我的画廊</a><a href="/personal/bb/">我的唠叨</a></li><li><a href="/site/time/">建设进程</a><a href="/site/census/">网站统计</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">推荐友链⌛</p><div class="ft-img-group"></div></div></div><div class="copyright"><span><b>&copy;2025</b></span><span><b>&nbsp;&nbsp;By Yangjiayu</b></span></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="博客框架为Hexo_v6.3.0"><img src="https://sourcebucket.s3.ladydaily.com/badge/Frame-Hexo-blue.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="主题版本Butterfly_v4.3.1"><img src="https://sourcebucket.s3.ladydaily.com/badge/Theme-Butterfly-6513df.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="本站采用多线部署，主线路托管于Vercel"><img src="https://sourcebucket.s3.ladydaily.com/badge/Hosted-Vercel-brightgreen.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://user.51.la/" style="margin-inline:5px" title="本站数据分析得益于51la技术支持"><img src="https://sourcebucket.s3.ladydaily.com/badge/Analytics-51la-3db1eb.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20226665" style="margin-inline:5px" title="本站已加入萌ICP豪华套餐，萌ICP备20226665号"><img src="https://sourcebucket.s3.ladydaily.com/badge/萌ICP备-20226665-fe1384.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://bitiful.dogecast.com/buckets" style="margin-inline:5px" title="本网站经Service Worker分流至缤纷云对象存储"><img src=" https://sourcebucket.s3.ladydaily.com/badge/Bucket-缤纷云-9c62da.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://www.netdun.net/" style="margin-inline:5px" title="本站使用网盾星球提供CDN加速与防护"><img src="https://sourcebucket.s3.ladydaily.com/badge/CDN-网盾星球-fff2cc.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="本网站源码由Github提供存储仓库"><img src=" https://sourcebucket.s3.ladydaily.com/badge/Source-Github-d021d6.svg" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="浅色和深色模式转换"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="右键模式" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog right_side"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button class="share" type="button" title="分享链接" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>百度搜索</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>空降评论</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>随便逛逛</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>关于博客</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>美化设置</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>切换全屏</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>打印页面</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);
document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://www.312782.xyz/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://www.312782.xyz/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://cdn1.tianli0.top/gh/nextapps-de/winbox/dist/winbox.bundle.min.js"></script><script async src="//at.alicdn.com/t/c/font_3586335_hsivh70x0fm.js"></script><script async src="//at.alicdn.com/t/c/font_3636804_gr02jmjr3y9.js"></script><script async src="//at.alicdn.com/t/c/font_3612150_kfv55xn3u2g.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="universe"></canvas><canvas id="snow"></canvas><script defer src="/js/fomal.js"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><a class="magnet_link_more"  href="https://yjyrichard.github.io/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(33.333333333333336% - 5px);background: #e9e9e9;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/site/census/'|| '/site/census/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("/api?null",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'null')
    }
  </script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="posts/d522d575.html" alt=""><img width="48" height="48" src="https://bilibili123.oss-cn-beijing.aliyuncs.com/websitepic/13.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-04-15</span><a class="blog-slider__title" href="posts/d522d575.html" alt="">小程序起步</a><div class="blog-slider__text">初识小程序</div><a class="blog-slider__button" href="posts/d522d575.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="posts/8610680.html" alt=""><img width="48" height="48" src="https://bilibili123.oss-cn-beijing.aliyuncs.com/websitepic/8.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-04-15</span><a class="blog-slider__title" href="posts/8610680.html" alt="">大模型的token究竟是啥?</a><div class="blog-slider__text">大模型的token究竟是啥?</div><a class="blog-slider__button" href="posts/8610680.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="posts/5c2f4951.html" alt=""><img width="48" height="48" src="https://bilibili123.oss-cn-beijing.aliyuncs.com/websitepic/14.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-04-15</span><a class="blog-slider__title" href="posts/5c2f4951.html" alt="">基础数据结构(3)</a><div class="blog-slider__text">栈，队列，堆，二叉树</div><a class="blog-slider__button" href="posts/5c2f4951.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="posts/45347810.html" alt=""><img width="48" height="48" src="https://bilibili123.oss-cn-beijing.aliyuncs.com/websitepic/10.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-04-15</span><a class="blog-slider__title" href="posts/45347810.html" alt="">基础数据结构(2)</a><div class="blog-slider__text">递归</div><a class="blog-slider__button" href="posts/45347810.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="posts/6e192bd3.html" alt=""><img width="48" height="48" src="https://bilibili123.oss-cn-beijing.aliyuncs.com/websitepic/10.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-04-15</span><a class="blog-slider__title" href="posts/6e192bd3.html" alt="">基础数据结构(1)</a><div class="blog-slider__text">数组与链表</div><a class="blog-slider__button" href="posts/6e192bd3.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="posts/3ec27523.html" alt=""><img width="48" height="48" src="https://bilibili123.oss-cn-beijing.aliyuncs.com/websitepic/7.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-04-21</span><a class="blog-slider__title" href="posts/3ec27523.html" alt="">微信支付</a><div class="blog-slider__text">java整合微信的网页支付包含原理</div><a class="blog-slider__button" href="posts/3ec27523.html" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('blog-slider swiper-container-fade swiper-container-horizontal');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('catalog_magnet');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1.5s·');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('pagination');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__jackInTheBox');
    arr[i].setAttribute('data-wow-duration', '1.5s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --></body></html>